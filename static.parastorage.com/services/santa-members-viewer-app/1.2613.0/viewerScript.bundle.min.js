!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.viewerScript=t():e.viewerScript=t()}(self,(()=>(()=>{var e={186:(e,t)=>{"use strict";t.wn=t.xA=t.rH=t.Kh=t.ZJ=t.tt=t.DI=t.sV=t.dn=void 0,t.AV=t.qq=void 0,t.dn="14bcded7-0066-7c35-14d7-466cb3f09103",t.sV="140603ad-af8d-84a5-2c80-a0f60cb47351",t.DI="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.tt="14724f35-6794-cd1a-0244-25fd138f9242",t.ZJ="1380b703-ce81-ff05-f115-39571d94dfcd",t.Kh="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.rH="b976560c-3122-4351-878f-453f337b7245",t.xA="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.wn="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.qq="148c2287-c669-d849-d153-463c7486a694",t.AV="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9";var n={}},213:(e,t,n)=>{var r=n(174);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},662:(e,t,n)=>{var r=n(114).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},174:(e,t,n)=>{var r=n(114).default,i=n(662);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},114:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="https://static.parastorage.com/services/santa-members-viewer-app/36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59/";var r={};return(()=>{"use strict";n.r(r),n.d(r,{createControllers:()=>Xa,exports:()=>Ka,initAppForPage:()=>Ga});var e={};n.r(e),n.d(e,{default:()=>mn});var t={};n.r(t),n.d(t,{default:()=>aa});var i={};n.r(i),n.d(i,{default:()=>ua});var o={};n.r(o),n.d(o,{exports:()=>Ia,initAppForPage:()=>Sa});var s="BLOCKS_WIDGET",a=["ar","arc","bcc","bqi","ckb","dv","fa","glk","ha","he","khw","ks","ku","mzn","pnb","ps","sd","ug","ur","yi"];var u=function(e){return e},l=function(e){var t=e.dsn,n=e.environment,r=e.release,i=e.withDataCallback,o=e.tags;return{dsn:t,config:{enabled:!0,release:r,dataCallback:i?u:void 0,environment:n,tags:o}}},c=function(e){return e.isEnabled&&e.currentLanguage?e.currentLanguage:void 0},d=function(e){return void 0===e&&"undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e)},f=function(e,t){var n=c(e.window.multilingual),r=e.site.language;if(t){var i=d().get("regionalLanguage");i&&(r=i)}return n||r||"en"},p=function(e){return"backend"===e.window.rendering.env},h=function(e){return e.seo.isInSEO()},g=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},m=function(){throw new Error("Translations has not been initialized yet")},b=function(e){var t=e.language,r=e.defaultTranslations,i=e.prefix,o=void 0===i?"messages":i,s=e.defaultLanguage,a=e.availableLanguages,u=e.localeDistPath,l=e.initI18n,c=e.basePath,d=this;this.t=m,this.all={},this.init=function(e){var t=void 0===e?{}:e,r=t.prepopulated,i=t.wait,o=void 0!==i&&i,s=t.useSuspense,a=void 0!==s&&s;return g(d,void 0,void 0,(function(){var e,t,i,s=this;return v(this,(function(u){switch(u.label){case 0:if(e=this.config,t=new Set(e.availableLanguages||[]),!this._initI18n)throw new Error("Can't initialize i18n without initI18n method.");return this.i18n=this._initI18n({locale:e.language,useSuspense:a,wait:o,messages:r,disableAutoInit:!0,asyncMessagesLoader:function(r){var i;return"en"===r?Promise.resolve(e.defaultTranslations):t.has(r)?fetch("".concat(null!==(i=s.basePath)&&void 0!==i?i:n.p).concat(s.localeDistPath,"/").concat(e.prefix,"_").concat(r,".json")).then((function(t){return t.ok?t.json():Promise.reject(new Error("Can't load locale: ".concat(e.language)))})):Promise.reject(new Error("Locale assets for ".concat(r," are not provided")))}}),[4,this.i18n.init()];case 1:if(u.sent(),!(i=this.i18n.getResourceBundle(e.language,"translation"))&&t.has(e.language))throw new Error("Unexpected missing translations for language ".concat(e.language));return this.all=i||e.defaultTranslations||{},this.t=function(e,t){return s.i18n.t(e,t)},[2,this]}}))}))},this.config={availableLanguages:a,language:t,defaultTranslations:r,prefix:o,defaultLanguage:s},this.localeDistPath=u,this._initI18n=l,this.i18n=null,this.basePath=c},_=function(e){var t;this.entry="viewerScript";var n,r=e.wixAPI,i=e.appData;this.isSSR="backend"===r.window.rendering.env,this.isSEO=h(r),this.isMobile="Mobile"===r.window.formFactor,this.isEditor="Editor"===r.window.viewMode,this.isPreview="Preview"===r.window.viewMode,this.isViewer="Site"===r.window.viewMode,this.isBlocksPreview=Boolean(null===(t=null==i?void 0:i.appData)||void 0===t?void 0:t.blocksPreviewData),this.language=f(r,this.isEditor),this.isRTL=(n=this.language,a.includes(n)),this.multilingual=r.window.multilingual,this.appDefinitionId=i.appDefinitionId},y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)},w=function(e,t){var n={};return e.visitorId?n.forSiteVisitors=y(y({},e),{visitorId:e.visitorId}):n.forSiteOwner=y(y({},e),{loggedInUserId:e.loggedInUserId}),t&&(n.overrideCriteria=t),n},P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};var I,A,C=function(){function e(e){var t=e.httpClient;this.reportError=function(e){console.warn("You are trying to report an error, but didn't configure sentry in `.application.json`\n\nPlease read the docs for more information https://bo.wix.com/pages/yoshi/docs/editor-flow/structure-api/app-configuration/#applicationjson","Error: ",e)},this._httpClient=t}return Object.defineProperty(e.prototype,"httpClient",{get:function(){var e=this._httpClient;return e},enumerable:!1,configurable:!0}),e}(),x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(){return M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},M.apply(this,arguments)},R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},E=function(e){function t(t){var n,r,i=t.experimentsConfig,o=t.essentials,s=t.platformBI,a=t.biLoggerFactory,u=t.monitoring,c=t.sentryConfig,d=t.wixAPI,g=t.appData,v=t.translationsConfig,m=t.defaultTranslations,y=void 0===m?null:m,I=t.biLogger,A=t.projectName,C=t.appName,x=t.prepopulatedData,R=t.optionalDeps,O=R.createHttpClient,E=R.initI18n,N=R.createExperiments,D=t.localeDistPath,U=t.shouldUseEssentials,T=t.basePath,k=this;k=e.call(this,{httpClient:U?null==o?void 0:o.httpClient:null==O?void 0:O({isSSR:p(d),getAppToken:function(){var e,t,n;return null!==(n=null===(t=(e=d.site).getAppToken)||void 0===t?void 0:t.call(e,g.appDefinitionId))&&void 0!==n?n:g.instance}})})||this,k.essentials=o,k.wixAPI=d,k.appName=C,k.projectName=A,k.prepopulatedData=x,k.basePath=T,k.environment=new _({appData:g,wixAPI:d});var L=f(d,k.environment.isEditor);if(k.localeDistPath=D,k.getCurrencyFormatter=null,k.formatCurrency=null,k.formatAddress=null,k.essentials&&"formatAddress"in k.essentials&&(k.formatAddress=k.essentials.formatAddress),k.essentials&&"createCurrencyFormatterWithDefaults"in k.essentials&&(k.getCurrencyFormatter=k.essentials.createCurrencyFormatterWithDefaults({language:L}),k.getCurrencyFormatter&&(k.formatCurrency=k.getCurrencyFormatter())),k.translations=!1===(null==v?void 0:v.enabled)?null:new b({language:L,defaultTranslations:y,prefix:null==v?void 0:v.prefix,availableLanguages:null==v?void 0:v.availableLanguages,localeDistPath:D,initI18n:E}),k.experiments=null,k._experimentsPromise=null,i){var j=k.environment.isViewer?{siteOwnerId:null==s?void 0:s.ownerId,visitorId:null==s?void 0:s.visitorId}:{siteOwnerId:null==s?void 0:s.ownerId,loggedInUserId:d.user.currentUser.id},B=(null==s?void 0:s.metaSiteId)?{entityId:null==s?void 0:s.metaSiteId}:void 0;if(U)k._experimentsPromise=i.centralized&&!(null==x?void 0:x.experiments)?Promise.resolve(k.essentials.experiments):function(e,t,n,r,i,o){return P(void 0,void 0,void 0,(function(){var s,a;return S(this,(function(u){switch(u.label){case 0:return s=e({useNewApi:!0,requestContext:w(r,i),baseUrl:o}),n?(s.add(n),[2,s]):t?(a=t.scopes.map((function(e){return s.load(e)})),[4,Promise.all(a)]):[2,s];case 1:return u.sent(),[2,s]}}))}))}(k.essentials.createExperiments,i,null==x?void 0:x.experiments,j,B,k.environment.isSSR?"https://wix.com":void 0);else{var F=N({prepopulated:null==x?void 0:x.experiments,experimentsConfig:i,baseUrl:k.environment.isSSR?"https://wix.com":void 0,ctx:j,overrideCriteria:B});k._experimentsPromise=F.init()}}if(null==x?void 0:x.biLogger)k.bi=null==x?void 0:x.biLogger;else if(I){var V=void 0;U?V=k.essentials.biLoggerFactory():a&&(V=a()),V&&(k.bi=I(V)({}))}if(k.sentry=null,k.errorMonitor=null,null==x?void 0:x.sentryMonitor)k.sentry=null==x?void 0:x.sentryMonitor;else if(null==x?void 0:x.errorMonitor)k.errorMonitor=null==x?void 0:x.errorMonitor;else if(c)if(c.errorMonitor&&(null==o?void 0:o.createErrorMonitor))k.errorMonitor=o.createErrorMonitor({dsn:c.DSN,environment:"Viewer:Worker",appName:null!==(n=k.appName)&&void 0!==n?n:"santa-members-viewer-app",version:"36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59",fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",componentId:"viewer-script",tags:{isSSR:p(d),isSEO:h(d)}});else{var $=l({dsn:c.DSN,environment:"Viewer:Worker",release:"".concat(null!==(r=k.appName)&&void 0!==r?r:"santa-members-viewer-app","@").concat("36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59"),withDataCallback:!0,tags:{isSSR:p(d),isSEO:h(d)}});k.sentry=null==u?void 0:u.createMonitor($.dsn,(function(e){return M(M({},e),$.config)}))}return k.sentry&&(k.reportError=function(e){return"string"==typeof e?k.sentry.captureMessage(e):k.sentry.captureException(e),k.sentry.lastEventId()}),k.errorMonitor&&(k.reportError=function(e){return"string"==typeof e?k.errorMonitor.captureMessage(e):k.errorMonitor.captureException(e)}),k}return x(t,e),t.prototype.init=function(){var e,t;return R(this,void 0,void 0,(function(){var n;return O(this,(function(r){switch(r.label){case 0:return n=this,[4,this._experimentsPromise];case 1:return n.experiments=r.sent(),[4,null===(e=this.translations)||void 0===e?void 0:e.init({prepopulated:null===(t=this.prepopulatedData)||void 0===t?void 0:t.translations})];case 2:return r.sent(),[2]}}))}))},t.prototype.createTranslations=function(e,t,n){var r,i=e.translationsConfig,o=e.defaultTranslations,s=e.localeDistPath;if(!1===(null==i?void 0:i.enabled))return null;if(s===this.localeDistPath&&(null==n?void 0:n.basePath)===this.basePath)return this.translations;var a=f(this.wixAPI,this.environment.isEditor);return new b({language:a,defaultTranslations:o,availableLanguages:null==i?void 0:i.availableLanguages,prefix:null==i?void 0:i.prefix,localeDistPath:s,initI18n:null==t?void 0:t.initI18n,basePath:null!==(r=null==n?void 0:n.basePath)&&void 0!==r?r:this.basePath})},t}(C),N={},D=function(e){I=e},U=function(e){A=e},T=function(){return N},k=function(e){N=e},L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},B=function(e){return"function"==typeof e};var F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F.apply(this,arguments)};function V(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function $(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}Object.create;"function"==typeof SuppressedError&&SuppressedError;var W,K=function(e,t){return e.localeCompare(t)};!function(e){e.Number="Number",e.Boolean="Boolean",e.String="String",e.Text="Text",e.Object="Object"}(W||(W={}));var G=function(e,t){var n=t.isMobile,r=t.language,i=void 0===r?"en":r;return"function"==typeof e.dangerousKeyTransformationOverride?e.dangerousKeyTransformationOverride(e.key,{isMobile:n,language:i}):function(e,t,n){if("string"!=typeof e)throw new Error("`generateKey` expects key to be passed and be a string");if(!t)throw new Error("`generateKey` expects options to be passed");return Object.keys(n).sort(K).reduce((function(e,r){var i=n[r]===t[r],o=!t[r]&&!n[r];return i||o?e:e+"\u25b6\ufe0e"+("boolean"!=typeof t[r]||n[r]?r+":"+t[r]:r)}),e)}(e.key,{m:n,l:i},{m:!1,l:"en"})},J=function(e){return e.type===W.Text},H=function(e,t){return{languageAndMobile:G(e,{isMobile:t.isMobile,language:t.language}),language:G(e,{isMobile:!1,language:t.language}),mobile:G(e,{isMobile:t.isMobile}),original:e.key}},q=function(e){return void 0===e.inheritDesktop||e.inheritDesktop},z=function(e){var t=e.environmentLabel;return function(e){throw new Error("It is not possible to translate ".concat(e,". Translate function was not passed to the ").concat(t))}},X=function(){var e,t=this;this.handlers=((e={})[W.Object]={serialize:function(e){return"string"==typeof e?(console.error("\u26a0\ufe0f Seems like you are calling `settings.set(param, JSON.stringify(value))`. Please, pass a plain object/array and tpa-settings will serializate it."),e):JSON.stringify(e)},deserialize:function(e){return"string"!=typeof e?e:JSON.parse(e)}},e),this.serialize=function(e,n){return e.type===W.Object?t.handlers[W.Object].serialize(n):n},this.deserialize=function(e,n){return e.type===W.Object?t.handlers[W.Object].deserialize(n):n}},Y=new X;function Z(e,t,n){void 0===n&&(n={});var r,i=J(t),o=H(t,{isMobile:n.isMobile,language:i?n.language:void 0}),s=q(t);return i?void 0!==e[o.languageAndMobile]?r=e[o.languageAndMobile]:s&&void 0!==e[o.language]&&(r=e[o.language]):void 0!==e[o.mobile]?r=e[o.mobile]:s&&void 0!==e[o.original]&&(r=e[o.original]),Y.deserialize(t,r)}var Q=!1;function ee(e,t,n,r){void 0===n&&(n={});var i=V(n,[]);void 0===r&&(r="COMPONENT");var o=e;e.COMPONENT||(Q||(console.warn("`getSettingsValue` or `getSettingsValues` should accept whole public data object. Probably, data was passed only for one scope."),Q=!0),o={COMPONENT:e,APP:{}});var s="COMPONENT"===r&&t.inheritFromAppScope,a=Z(o[r],t,i);return void 0===a&&s&&(a=Z(o.APP,t,i)),t.getDefaultValue&&void 0===a?function(e,t,n,r){var i,o;void 0===r&&(r={});var s=null!==(i=r.t)&&void 0!==i?i:z({environmentLabel:null!==(o=r.environmentLabel)&&void 0!==o?o:"`getSettingsValue` function"});return n.getDefaultValue({isMobile:r.isMobile,isRTL:r.isRTL,isEditorX:r.isEditorX,t:s,presetId:r.presetId,experiments:r.experiments,getSettingParamValue:function(n,i){return void 0===i&&(i={}),ee(e,n,F(F(F({},r),i),{t:s}),t)}})}(o,r,t,i):a}var te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(e){function t(t){var n,r=this;(r=e.call(this,t)||this).entry="viewerScript";var i,o=t.config,s=t.widgetId,a=t.wixAPI.location.query;return r.isEditorX=function(e){var t;return null!==(t=null==e?void 0:e.booleans.responsive)&&void 0!==t&&t}(null===(n=null==o?void 0:o.style)||void 0===n?void 0:n.styleParams),r.isADI=(void 0===(i=a)&&(i={}),"onboarding"===i.dsOrigin),r.isClassicEditor=function(e){return void 0===e&&(e={}),"Editor1.4"===e.dsOrigin}(a),r.widgetId=s,r}return te(t,e),t}(_),re=function(e,t){return{name:e.name,message:e.message,stack:e.stack,errorId:t}};function ie(e,t){var n,r,i,o;this.controllerConfig.wixCodeApi.window.openModal("".concat((n=this.componentName||"",r=e,i=this.controllerConfig.appParams.instance,o="".concat(n,"/").concat(r),"https://editor.wixapps.net/render/prod/modals/".concat("santa-members-viewer-app","/").concat("36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59","/").concat(o,"?instance=").concat(i))),t)}var oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},se.apply(this,arguments)},ae=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ue=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},le=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ce=function(e){function t(t){var n,r,i,o,s,a,u=t.viewerScriptFlowAPI,d=t.controllerConfig,f=t.appDefinitionId,g=t.widgetId,v=t.componentId,m=t.componentName,b=t.biLogger,_=t.prepopulatedData,y=t.translations,w=t.fedopsConfig,P=t.sentryConfig,S=t.shouldUseEssentials,I=t.multilingualDisabled,A=t.panoramaClient,C=this;(C=e.call(this,{httpClient:u._httpClient})||this).appLoadStarted=function(){if(null!==C.fedops){var e=C.fedops.appLoadStarted;e.call(C.fedops),C.fedops.appLoadStarted=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];console.warn("\u{1f97a} Seems like you're trying to call `fedopsLogger.appLoadStarted` and `fedopsLogger.appLoaded` in your controller.\nWe are already logging load events for SSR and CSR environments, so you can remove these calls from your project."),e.call.apply(e,le([C.fedops],t,!1))}}},C.essentials=d.essentials,C.controllerConfig=d,C.experiments=u.experiments,C.bi=u.bi,C.prepopulatedData=_,C.componentName=m;var x=d.platformAPIs;if(C.panoramaClient=null==A?void 0:A.createClientForComponent(),C.getCurrencyFormatter=u.getCurrencyFormatter,C.formatCurrency=null===(n=C.getCurrencyFormatter)||void 0===n?void 0:n.call(C),C.formatAddress=u.formatAddress,C.environment=new ne({wixAPI:d.wixCodeApi,appData:d.appParams,config:d.config,widgetId:g}),!u.bi&&b)if(S){var M=C.essentials.biLoggerFactory();C.bi=b(M)({})}else(null===(r=d.platformAPIs)||void 0===r?void 0:r.biLoggerFactory)&&(C.bi=b(null===(i=d.platformAPIs)||void 0===i?void 0:i.biLoggerFactory())({}));if(C.sentry=null,C.errorMonitor=null,(null==_?void 0:_.sentryMonitor)||(null==_?void 0:_.errorMonitor))C.sentry=null!==(o=null==_?void 0:_.sentryMonitor)&&void 0!==o?o:null,C.errorMonitor=null!==(s=null==_?void 0:_.errorMonitor)&&void 0!==s?s:null;else if(P)if(P.errorMonitor&&C.essentials.createErrorMonitor)C.errorMonitor=C.essentials.createErrorMonitor({dsn:P.DSN,environment:"Viewer:Worker",appName:"santa-members-viewer-app",version:"36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59",fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",componentId:v,tags:{componentId:v,componentName:m,isSSR:p(d.wixCodeApi),isSEO:h(d.wixCodeApi)}});else{var R=l({dsn:P.DSN,environment:"Viewer:Worker",release:"".concat("santa-members-viewer-app","@").concat("36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59"),withDataCallback:!0,tags:{componentId:v,componentName:m,isSSR:p(d.wixCodeApi),isSEO:h(d.wixCodeApi)}});C.sentry=null===(a=x.monitoring)||void 0===a?void 0:a.createMonitor(R.dsn,(function(e){return se(se({},e),R.config)}))}return C.sentry&&(C.reportError=function(e){return"string"==typeof e?C.sentry.captureMessage(e):C.sentry.captureException(e),C.sentry.lastEventId()}),C.errorMonitor&&(C.reportError=function(e){return"string"==typeof e?C.errorMonitor.captureMessage(e):C.errorMonitor.captureException(e)}),C.fedops=null,!1!==(null==w?void 0:w.enabled)&&((null==_?void 0:_.fedopsLogger)?C.fedops=null==_?void 0:_.fedopsLogger:C.fedops=S?C.essentials.fedopsLogger:x.fedOpsLoggerFactory.getLoggerForWidget({appId:f,widgetId:g,paramsOverrides:{corrId:C.controllerConfig.compId}}),C.environment.isSSR&&(C.appLoadStarted(),null==A||A.reportLoadStart()),C.fedops.interactionStarted("controller-load")),C.translations=y,C.viewerScriptFlowAPI=u,C.settings={get:function(e){var t,n,r;return ee(null!==(n=null===(t=C.controllerConfig.config)||void 0===t?void 0:t.publicData)&&void 0!==n?n:{},e,{t:null===(r=C.translations)||void 0===r?void 0:r.t,experiments:C.experiments,isMobile:C.environment.isMobile,language:I?c(C.environment.multilingual):void 0})}},C.openModal=ie,C}return oe(t,e),t.prototype.init=function(){var e,t;return ae(this,void 0,void 0,(function(){return ue(this,(function(n){switch(n.label){case 0:return null!==(null===(e=this.translations)||void 0===e?void 0:e.i18n)?[3,2]:[4,this.translations.init({prepopulated:null===(t=this.prepopulatedData)||void 0===t?void 0:t.translations,useSuspense:this.environment.isEditor||this.environment.isADI})];case 1:n.sent(),n.label=2;case 2:return null!==this.fedops&&this.fedops.interactionEnded("controller-load"),[2]}}))}))},t.prototype.updateControllerConfig=function(e){this.controllerConfig.config=e},t.prototype.handleError=function(e){var t;this.sentry&&(this.reportError(e),t=this.sentry.lastEventId()),this.errorMonitor&&(t=this.reportError(e)),this.controllerConfig.setProps({_workerError:re(e,t)})},t.prototype.withErrorBoundary=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{e.apply(void 0,n)}catch(e){e instanceof Error&&t.handleError(e)}}},t}(C),de={language:"_language",translations:"_translations",multilingual:"_multilingual",experiments:"_experiments",biMethods:"_biMethods",openModal:"__openModal__",biUtil:"_biUtil",mobile:"_mobile",isRTL:"_isRTL",isSSR:"_isSSR",isSEO:"_isSEO",appDefinitionId:"_appDefinitionId",widgetId:"_widgetId",fedopsLogger:"_fedopsLogger",sentry:"_sentry",errorMonitor:"_errorMonitor",publicData:"_publicData",styles:"__styles",enabledHOCs:"_enabledHOCs",onAppLoaded:"_onAppLoaded",onAppLoadStarted:"_onAppLoadStarted",error:"_workerError",errorMonitorWithOptions:"__errorMonitorWithOptions",logger:"__logger",transactionWithAction:"__transactionWithAction",shouldReportAppLoadStarted:"shouldReportAppLoadStarted"},fe=function(){function e(){this.store={}}return e.prototype.init=function(){},e.prototype.getProps=function(){return this.store},e.prototype.getProp=function(e){var t=this.getPrivateKey(e);return this.store[t]},e.prototype.spreadProp=function(e){var t,n=this.getPrivateKey(e);return(t={})[n]=this.store[n],t},e.prototype.getPrivateKey=function(t){return e.PropsMap[t]},e.prototype.getFromExternalStore=function(e,t){return t[this.getPrivateKey(e)]},e.prototype.setProp=function(e,t){var n=this.getPrivateKey(e);this.store[n]=t},e.prototype.isHOCEnabled=function(e){return this.getProp("enabledHOCs")[e]},e.prototype.isFlowPropsReceived=function(){return!!this.getProp("enabledHOCs")},e.PropsMap=de,e}(),pe=function(e){return function(t){var n;return e.controllerConfig.config.publicData=t,(n={})[fe.PropsMap.publicData]=t,n}},he=function(){return he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},he.apply(this,arguments)},ge=function(e){return function(t){var n,r,i;return e.controllerConfig.config.style.styleParams=(void 0===(r=e.controllerConfig.config.style.styleParams)&&(r={}),void 0===(i=t)&&(i={}),he(he({},r),{colors:he(he({},r.colors),i.colors),booleans:he(he({},r.booleans),i.booleans),fonts:he(he({},r.fonts),i.fonts),numbers:he(he({},r.numbers),i.numbers)})),(n={})[fe.PropsMap.styles]=e.controllerConfig.config.style.styleParams,n}},ve=function(e,t,r,i,o,s){var a=s(),u=function(e,t){if(!e.createPanoramaClient)return null;var n=t.componentId,r=t.sentryConfig,i=t.environment;return e.createPanoramaClient({fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",artifactVersion:"36111aa1193edff69a4e0eaea9f1d145a511d501417dca41d5d88b59",componentId:n,sentryDsn:null==r?void 0:r.DSN,sentryEnvironment:i})}(r.essentials,{componentId:t.id,sentryConfig:t.sentryConfig,environment:"Viewer:Worker"}),l=new ce({translations:i.createTranslations(t,e,{basePath:n.p}),componentId:t.id,componentName:t.componentName,viewerScriptFlowAPI:i,appDefinitionId:t.appDefinitionId,widgetId:t.id,translationsConfig:t.translationsConfig,persistentAcrossPages:t.persistentAcrossPages,biLogger:t.biLogger,fedopsConfig:t.fedopsConfig,sentryConfig:t.sentryConfig,controllerConfig:r,shouldUseEssentials:t.shouldUseEssentials,multilingualDisabled:t.multilingualDisabled,panoramaClient:u});return t.method({controllerConfig:r,flowAPI:l,appData:a,dangerousPublicDataOverride:pe(l),dangerousStylesOverride:ge(l)})};let me=function(e){return e.RestrictedMemberPagePermissions="specs.membersArea.EnableMemberPagePermissions",e.EnablePublicAppData="specs.membersArea.enableAppData",e.EnableNotifications="specs.membersArea.enableNotificationsOnV2",e}({});var be=n(186);const _e=[be.dn,be.tt,be.qq,be.sV,"14ebe801-d78a-daa9-c9e5-0286a891e46f","14dbef06-cc42-5583-32a7-3abd44da4908",be.AV,"476dc2dd-e16e-43b0-a0aa-1a486c78fbe2"],ye="b976560c-3122-4351-878f-453f337b7245",we="14f25924-5664-31b2-9568-f9c5ed98c9b1",Pe="{userName}",Se=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i,Ie="initialData";let Ae=function(e){return e.MissingMemberId="Error: please provide site member ID",e.RouteNotFound="Error: route not found by provided widgetId:",e.MissingMembersAreaPage="Error: missing members area page - failed to find prefix",e.MissingMembersAreaSettingsPage="Error: missing members area settings page - failed to find prefix",e.CannotNavigateToMemberNoPublicPage="Error: cannot navigate to member, no public page",e.MissingRoutes="Error: members area viewer has no routes",e.NotInitializedWixCodeApi="Error: wixCodeApi not properly initialized",e.CannotFindPageToNavigateTo="Error: cannot find page to navigate to by provided widgetId and appDefinitionId. Check if correct widgetId or appDefId is passed.",e.SectionUrlNotFound="Error: section URL was not found",e}({});const Ce="members-menu-initial-items",xe="login-dropdown-menu-initial-items",Me="@members_login",Re="@members_menu",Oe="@members-login-bar",Ee="@members-menu";let Ne=function(e){return e.Profile="Profile",e.Settings="Settings",e}({});function De(e){if(!e||!e[0])return[];return Object.keys(e[0]).includes("isVisible")?function(e){return e.map((e=>({link:e.link,isVisibleInMenuBar:e.isVisible,isVisibleInMobileMenuBar:e.isVisibleMobile,visibleForRoles:e.visibleForRoles})))}(e):function(e){return e.map((e=>({link:e.l,isVisibleInMenuBar:!e.hmb,isVisibleInMobileMenuBar:!e.hmmb,visibleForRoles:e.vfr||[]})))}(e)}const Ue=e=>e.split("#");const Te="_",ke=/{(.*)}/,Le=new RegExp(`\\.(${["wix.com","editorx.com"].join("|")})$`),je=new RegExp(`\\.(${["42.wixprod.net","uw2-edt-1.wixprod.net"].join("|")})$`),Be=new RegExp(".*\\.dev.wix-code.com$");function Fe(e){const t=function(e,t){const n=t[e]||t[Te];if(!n&&function(e){return!!e.match(/\._base_domain_$/)}(e))return t[Ve];return n}(function(e){return e.replace("create.editorx.com","editor.editorx.com")}(e.host).replace(Le,"._base_domain_").replace(je,"._api_base_domain_").replace(Be,"*.dev.wix-code.com"),e.domainToMappings);var n,r;return function(e,t){const n=null==t?void 0:t.find((t=>e.startsWith(t.destPath)));if(!n)return e;return n.srcPath+e.slice(n.destPath.length)}((n=e.protoPath,r=e.data||{},n.split("/").map((e=>function(e,t){const n=e.match(ke)||[],r=n[1];if(r){const i=e.replace(n[0],"");return function(e,t,n,r){let i=e;for(const e of t.split(".")){if(!i)return n;i=i[e]}return`${i}${r}`}(t,r,e,i)}return e}(e,r))).join("/")),t)}const Ve="www._base_domain_";function $e(e,t=""){const n={};return Object.entries(e).forEach((([e,r])=>{const i=null!==r&&"object"==typeof r&&!Array.isArray(r),o=function(e,t){return`${e}${e?".":""}${t}`}(t,e);if(i){const e=$e(r,o);Object.assign(n,e)}else n[o]=r})),n}function We(e){const t=$e(e);return Object.entries(t).reduce(((e,[t,n])=>((Array.isArray(n)?n:[n]).forEach((n=>{null!=n&&e.append(t,n)})),e)),new URLSearchParams)}var Ke;function Ge(e,t={},n){return function(r={},i){return"string"==typeof r?r:o(e,r);function o(e,t){const n={};return[null,void 0].includes(t)?t:(Object.entries(t).forEach((([t,r])=>{var i,o,u;const l=e[t],{schemaName:c,schemaType:d}=function(e=""){const[t,n]=Ue(e);return n?{schemaName:n,schemaType:t}:{schemaName:t}}(l),f="Map"===d;let p;p=(null!==(u=null===(o=null===(i=a(c))||void 0===i?void 0:i.checkRepetable)||void 0===o?void 0:o.call(i,r))&&void 0!==u?u:Array.isArray(r))?r.map((e=>s(e,c))):f?function(e,t){return Object.entries(e).reduce(((e,[n,r])=>(e[n]=s(r,t),e)),{})}(r,c):s(r,c),n[t]=p})),n)}function s(e,n){if(!n)return e;const r=t[n];if(a(n))return a(n).transform(e);if(r)return o(r,e);throw new Error(`${n} is neither schema nor serializable type`)}function a(e){var t;return null===(t=n[e])||void 0===t?void 0:t[i]}}}!function(e){e[e.TO_JSON=0]="TO_JSON",e[e.FROM_JSON=1]="FROM_JSON"}(Ke||(Ke={}));const Je={types:["google.protobuf.Timestamp"],[Ke.TO_JSON]:{transform:e=>null==e?void 0:e.toISOString()},[Ke.FROM_JSON]:{transform:e=>e?new Date(e):void 0}},He={types:["google.protobuf.FieldMask"],[Ke.TO_JSON]:{transform:e=>e.join(","),checkRepetable:e=>e.some((e=>Array.isArray(e)))},[Ke.FROM_JSON]:{transform:e=>"object"==typeof e?e.paths:e.split(",")}},qe={types:["google.protobuf.BytesValue","BYTES"],[Ke.TO_JSON]:{transform:e=>{const t=e.reduce(((e,t)=>e+String.fromCharCode(t)),"");return btoa(t)}},[Ke.FROM_JSON]:{transform:e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}},ze={types:["google.protobuf.Duration"],[Ke.TO_JSON]:{transform:({seconds:e="0",nanos:t=0})=>{let n="";return 0!==t&&(n=`.${t.toString().padStart(9,"0")}`),`${e}${n}s`}},[Ke.FROM_JSON]:{transform:e=>{const[t,n]=e.substring(0,e.length-1).split(".");return{seconds:t,nanos:Xe(n)}}}};function Xe(e){let t=0;if(void 0!==e){const n=3-e.length/3;t=parseInt(e,10)*Math.pow(1e3,n)}return t}const Ye={types:["FLOAT","DOUBLE","google.protobuf.FloatValue","google.protobuf.DoubleValue"],[Ke.TO_JSON]:{transform:e=>isFinite(e)?e:e.toString()},[Ke.FROM_JSON]:{transform:e=>"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:e}};const Ze=[...[Je,He,qe,ze,Ye]].reduce(((e,t)=>{const n=t.types.reduce(((e,n)=>Object.assign(Object.assign({},e),{[n]:t})),{});return Object.assign(Object.assign({},e),n)}),{});function Qe(e,t={}){const n=Ge(e,t,Ze);return{fromJSON(e){const t=function(e){try{return JSON.parse(e)}catch(e){}}(e)||e;return n(t,Ke.FROM_JSON)},toJSON:e=>n(e,Ke.TO_JSON)}}var et={},tt={};function nt(e){return Fe(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/members/v1/roles",destPath:""}],_:[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"www._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"members.wixapps.net":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"www.wixapis.com":[{srcPath:"/members/v1/roles",destPath:"/v1/roles"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"create.editorx":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}]}}))}function rt(e){var t=Qe(et,{}),n=t.toJSON,r=t.fromJSON,i=Qe(tt,{}).fromJSON;function o(t){var r=t.host,o=n(e);return{entityFqdn:"wix.members.v1.role",method:"GET",methodFqn:"com.wixpress.members.memberroles.MemberRoles.GetRoles",url:nt({protoPath:"/v1/roles/members/{memberId}",data:o,host:r}),params:We(o),transformResponse:i}}return o.fromReq=r,o.__isAmbassador=!0,o}let it,ot,st;const at=(e,t)=>()=>{try{!function(e){try{st&&ot.interactionStarted(e)}catch(e){const t="Failed to start fedops interaction, reason: "+e;it&&it.captureException(t)}}(e);const n=t();return function(e){try{st&&ot.interactionEnded(e)}catch(e){const t="Failed to end fedops interaction, reason: "+e;it&&it.captureException(t)}}(e),n}catch(e){throw console.error(e),it&&it.captureException(e.toString()),e}};function ut(e,t){var n;void 0===t&&(t={}),null!=(n=it)&&n.captureMessage&&it.captureMessage(e,{level:"error",...t})}let lt;function ct(){return lt}class dt{constructor(e){this.httpClient=e}async get(e){try{return(await this.httpClient.get(e)).data}catch(e){return console.log("error fetching data",e.message),{}}}async post(e,t){try{return(await this.httpClient.post(e,t)).data}catch(e){return console.log("error posting data",e.message),{}}}}var ft={},pt={};function ht(e){return Fe(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/activity-counters-api",destPath:""}],"www.wixapis.com":[{srcPath:"/members/v1/activity-counters",destPath:"/v1/activity-counters"}],_:[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"www._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"create.editorx":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}]}}))}function gt(e){var t=Qe(ft,{}),n=t.toJSON,r=t.fromJSON,i=Qe(pt,{}).fromJSON;function o(t){var r=t.host,o=n(e);return{entityFqdn:"wix.members.v1.activity_counter",method:"GET",methodFqn:"com.wixpress.members.activitycounters.ActivityCounters.GetActivityCounters",url:ht({protoPath:"/v1/activity-counters/{memberId}",data:o,host:r}),params:We(o),transformResponse:i}}return o.fromReq=r,o.__isAmbassador=!0,o}var vt,mt,bt,_t,yt,wt={},Pt={};function St(e){return Fe(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/notifications-feed-api-proxy",destPath:""}],"apps._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"editor._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"blocks._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"create.editorx":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"gapps._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"manage._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"},{srcPath:"/_api/ping/notifications-feed/v1/feed",destPath:"/v1/feed"},{srcPath:"/_api/ping/notifications-feed/api/v1/feed",destPath:"/api/v1/feed"}],"www._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"},{srcPath:"/_api/ping/notifications-feed/v1/feed",destPath:"/v1/feed"},{srcPath:"/_api/ping/notifications-feed/api/v1/feed",destPath:"/api/v1/feed"}],_:[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}]}}))}async function It(e){let{metaSiteId:t,flowAPI:n,memberId:r,wixCodeApi:i}=e;const o=null==i.site.getAppToken?void 0:i.site.getAppToken(be.Kh);if(!o)return null;try{var s;const e=await n.httpClient.request(function(e){var t=Qe(wt,{}),n=t.toJSON,r=t.fromJSON,i=Qe(Pt,{}).fromJSON;function o(t){var r=t.host,o=n(e);return{entityFqdn:"wix.ping.feed.v1.notification",method:"POST",methodFqn:"com.wixpress.ping.feed.api.FeedService.GetNumberOfUnseenNotifications",url:St({protoPath:"/api/v1/feed/notifications/unseen-notifications",data:o,host:r}),data:o,transformResponse:i}}return o.fromReq=r,o.__isAmbassador=!0,o}({shouldCancelMergeContactInMobile:!1,recipient:{contact:{metaSiteId:t,contactId:r}},feedFilter:{channel:_t.WEB},specialMigrationSpecs:[yt.HideChatNotifications]}),{signedInstance:o}),i=null==e||null==(s=e.data)?void 0:s.numberOfUnseen;return i?{memberId:r,appId:we,counters:[{key:"notificationsCount",public:!1,count:i}]}:null}catch(e){var a;return null==(a=n.errorMonitor)||a.captureException(e),null}}!function(e){e.UNSEEN="UNSEEN",e.SEEN_BUT_UNREAD="SEEN_BUT_UNREAD",e.READ="READ",e.RESOLVED="RESOLVED",e.DISMISSED="DISMISSED",e.DELETED="DELETED"}(vt||(vt={})),function(e){e.REGULAR="REGULAR",e.ALERT_WARNING="ALERT_WARNING",e.ALERT_INFO="ALERT_INFO"}(mt||(mt={})),function(e){e.UrlIcon="UrlIcon",e.AppIcon="AppIcon",e.PersonAvatar="PersonAvatar"}(bt||(bt={})),function(e){e.UNKOWN="UNKOWN",e.WEB="WEB",e.MOBILE="MOBILE"}(_t||(_t={})),function(e){e.HideChatNotifications="HideChatNotifications"}(yt||(yt={}));const At="current-user-slug",Ct="current-user-id";function xt(e,t,n){let r,i,o;return{getCurrentUser:function(){return i??{}},setCurrentUser:async function(t,n){const r=await function(t,n){const r=ct(),i=r.getItem(At),o=r.getItem(Ct);if(i&&o===t.id)return i;o&&o===t.id||r.setItem(Ct,t.id);if(!t.loggedIn||"Site"!==e.window.viewMode)return t.id;return async function(e){var t;const n=new dt(e),r=await n.get("/_api/members/v1/members/my");return null==(t=r.member)||null==(t=t.profile)?void 0:t.slug}(n).then((e=>{const n=e||t.id;return r.setItem(At,n),n})).catch((()=>ut("Error while fetching current user slug",{userDataId:t.id})))}(t,n);i={id:t.id,loggedIn:t.loggedIn,slug:r}},getViewedUser:function(){return r??{}},setViewedUser:function(e){e&&(r=e)},fetchRoles:async function(e,t,n){var r,i;const[o,s]=await Promise.all([e?n.request(rt({memberId:e})).catch((()=>{})):void 0,t?n.request(rt({memberId:t})).catch((()=>{})):void 0]);return{...o&&{[e]:(null==o||null==(r=o.data)||null==(r=r.roles)?void 0:r.map((e=>{var t;return null==(t=e.roleKey)?void 0:t.toLocaleLowerCase()})))||[]},...s&&{[t]:(null==s||null==(i=s.data)||null==(i=i.roles)?void 0:i.map((e=>{var t;return null==(t=e.roleKey)?void 0:t.toLocaleLowerCase()})))||[]}}},getRoles:function(){return o??{}},setRoles:function(e){o=e},fetchMenuCounters:function(r){return r&&!1!==r.loggedIn?new Promise(((i,o)=>{const s=r&&r.id;s?async function(e){let{memberId:t,loggedIn:n,biService:r,flowAPI:i,wixCodeApi:o}=e;try{var s,a;const[e,u]=await Promise.all([i.httpClient.request(gt({memberId:t})),n?It({metaSiteId:null==r||null==(s=r.bi)?void 0:s.metaSiteId,memberId:t,flowAPI:i,wixCodeApi:o}):null]),l=(null==e||null==(a=e.data)?void 0:a.activityCounters)||[];return u&&l.push(u),l.map((e=>{var t;return{appDefId:e.appId,numbers:null==(t=e.counters)?void 0:t.reduce(((e,t)=>(e[t.key]={public:t.public,count:t.count},e)),{})}}))}catch(e){var u;return null==(u=i.errorMonitor)||u.captureException(e),[]}}({memberId:s,loggedIn:!!r.loggedIn,biService:t,flowAPI:n,wixCodeApi:e}).then((e=>i({apps:e}))):o(new Error("No user to get menu counters by"))})):Promise.resolve({apps:[]})},replaceUserPatternWithSlug:function(e,t){return e.replace(Pe,t.slug).replace(encodeURI(Pe),t.slug)}}}const Mt=e=>Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&");const Rt=(()=>{let e,t=null,n=null,r=[],i=[],o=null;return{getFlowAPI:()=>t,setFlowAPI:e=>t=e,getWixCodeAPI:()=>n,setWixCodeAPI:e=>n=e,getRoutes:()=>r,setRoutes:e=>r=e,getSettingsRoutes:()=>i,setSettingsRoutes:e=>i=e,getGlobalControllerConfig:()=>o,setGlobalControllerConfig:e=>o=e,getMembersLoginWidgets:()=>e||[],setMembersLoginWidgets:t=>e=t}})();function Ot(e){let{menuItem:t,publicRouterConfig:n={},privateRouterConfig:r={},viewedUser:i,shouldLog:o=!0}=e,s=t.link;i&&0===s.indexOf(`/${i.slug}/`)&&(s=s.replace(`/${i.slug}/`,`/${Pe}/`));const a=s.split("/"),u=a.indexOf(Pe),l=u>-1?"/"+a.splice(u,a.length).join("/"):"/"+a[a.length-1],c=n.patterns||{},d=r.patterns||{},f=c[l]||d[l];if(!f&&o){const e={menuItemLink:t.link},o={menuItem:t,publicRouterConfig:n,privateRouterConfig:r,viewedUser:i};p="Could not find the pattern for menu item in router configs - probably an invalid (or custom) menu item",void 0===(h={tags:e,extra:{data:JSON.stringify(o)}})&&(h={}),null!=(g=it)&&g.captureMessage&&it.captureMessage(p,{level:"info",...h})}var p,h,g;return f}function Et(e){let{menuItems:t,publicRouterPrefix:n}=e;const r=t.filter((e=>!!e.link||e.items&&e.items.length>0));return r.forEach((e=>{if(e.link&&0===e.link.indexOf(`undefined/${Pe}`)){const t=e.link.split("/");e.link=`/${n}/${Pe}/${t[2]}`}})),r.forEach((e=>{if(!e.link)return;if(4===e.link.split("/").length&&-1===e.link.indexOf(Pe)){const t=e.link.split("/");"https:"!==t[0]&&"http:"!==t[0]&&(e.link=`/${t[1]}/${Pe}/${t[3]}`)}})),r}function Nt(e){let{slug:t,options:n,wixCodeApi:r}=e;const[i]=function(e){let{location:t}=e;const{prefix:n,path:r,query:i}=t,o=Object.keys(i).length>0?`?${Mt(i)}`:"";return`/${n}/${r.join("/")}${o}`}(r).split("?"),o=function(e,t){if(!t)return e;const[,...n]=e.split("/");return n[1].match(Se)?(n[1]=t,`/${n.join("/")}`):e}(i,t),s=n.find((e=>{let{link:t}=e;return t===o}));return s?s.value:null}function Dt(e){let{menu:t,options:n,viewedUser:r,wixCodeApi:i}=e;if(!!t.autoNavigation)return;const o=(r||{}).slug;t.value=Nt({slug:o,options:n,wixCodeApi:i}),function(e){let{menu:t,options:n,wixCodeApi:r}=e;null==t.onChange||t.onChange((e=>{let{target:i}=e;const o=i.value,s=(n.find((e=>{let{value:t}=e;return t===o}))||{}).link;var a;s?r.location.to(s):ut("Menu navigation request ignored: ",{menu:t,target:i,options:n,newLink:s,api:!(null==r||null==(a=r.location)||!a.to)})}))}({menu:t,options:n,wixCodeApi:i})}function Ut(e){let{menuItems:t,parsedRoutersConfigs:n,userRoles:r,viewedUser:i,appsCounters:o}=e;const s=null==n?void 0:n.find((e=>"public"===e.type)),a=null==n?void 0:n.find((e=>"private"===e.type)),u=function(e){let{menuItems:t,publicRouterConfig:n,privateRouterConfig:r,userRoles:i=[],viewedUser:o}=e;return t.filter((e=>{if(!e.link)return!0;const t=Ot({menuItem:e,publicRouterConfig:n,privateRouterConfig:r,viewedUser:o});if(!t||!t.appData||!t.appData.visibleForRoles||0===t.appData.visibleForRoles.length)return!0;const{visibleForRoles:s=[]}=t.appData;return!!s.some((e=>i.indexOf(e)>-1))}))}({menuItems:t,publicRouterConfig:s,privateRouterConfig:a,userRoles:r,viewedUser:i}),l=function(e){var t;let{menuItems:n,appsCounters:r,publicRouterConfig:i,privateRouterConfig:o,viewedUser:s}=e;return n.forEach((e=>{e.displayCount=null})),null!=r&&null!=(t=r.apps)&&t.length?(r.apps.forEach((e=>{n.forEach((t=>{if(!t.link)return;const n=Ot({menuItem:t,publicRouterConfig:i,privateRouterConfig:o,viewedUser:s});if(n&&n.appData.appDefinitionId===e.appDefId){const r=n.appData.numbers&&n.appData.numbers.key,i=e.numbers&&r&&e.numbers[r];i&&(t.displayCount=i.count)}}))})),n):n}({menuItems:u,appsCounters:o,publicRouterConfig:s,privateRouterConfig:a,viewedUser:i});return function(e){let{menuItems:t,viewedUser:n}=e;return t.map((e=>(e.link&&e.link.indexOf(Pe)>-1&&(e.link=e.link.replace(Pe,n.slug)),e)))}({menuItems:l,viewedUser:i})}function Tt(e){let{menuItems:t,parsedRoutersConfigs:n,viewedUser:r,permittedPagesMap:i,experiments:o}=e;if(o&&o.enabled(me.RestrictedMemberPagePermissions)){const e=null==n?void 0:n.find((e=>"public"===e.type)),o=null==n?void 0:n.find((e=>"private"===e.type));return t.filter((t=>{const n=Ot({menuItem:t,publicRouterConfig:e,privateRouterConfig:o,viewedUser:r});return!n||(i[n.page]??!0)}))}return t}function kt(e){let{menuItems:t,parsedRoutersConfigs:n=[],viewedUserRoles:r,viewedUser:i,currentUser:o,appsCounters:s,parsedConfigItems:a,publicRouterPrefix:u,permittedPagesMap:l,experiments:c}=e;const d=!i.id&&o?o:i,f=function(e){let{menuItems:t,parsedConfigItems:n}=e;if(n)return t.filter((e=>{const t=n.find((t=>t.link===e.link)),{isVisibleInMenuBar:r}=t||{};return"boolean"!=typeof r||r}))}({menuItems:Et({menuItems:t,publicRouterPrefix:u}),parsedConfigItems:a}),p=function(e){let{menuItems:t,currentUser:n,viewedUser:r,parsedRoutersConfigs:i=[]}=e;if(!r.id)return t;if(n&&n.id===r.id)return t;const o=i.find((e=>"private"===e.type));return t.filter((e=>!e.link||!Ot({menuItem:e,viewedUser:r,privateRouterConfig:o,shouldLog:!1})))}({menuItems:f||[],currentUser:o,viewedUser:i,parsedRoutersConfigs:n}),h=Ut({menuItems:Tt({menuItems:p,parsedRoutersConfigs:n,permittedPagesMap:l,viewedUser:i,experiments:c}),parsedRoutersConfigs:n,userRoles:r,viewedUser:d,appsCounters:s});return h.forEach((e=>{e.items&&e.items.length>0&&(e.items=kt({menuItems:e.items,parsedRoutersConfigs:n,viewedUserRoles:r,viewedUser:i,currentUser:o,appsCounters:s,parsedConfigItems:a,publicRouterPrefix:u}))})),function(e){let{menuItems:t}=e;return t.filter((e=>!!e.link||e.items&&e.items.length>0))}({menuItems:h})}function Lt(e){let{menuItems:t,parsedRoutersConfigs:n,userRoles:r,viewedUser:i,appsCounters:o,publicRouterPrefix:s,permittedPagesMap:a,experiments:u}=e;return Ut({menuItems:Tt({menuItems:Et({menuItems:t,publicRouterPrefix:s}),parsedRoutersConfigs:n,permittedPagesMap:a,viewedUser:i,experiments:u}),parsedRoutersConfigs:n,userRoles:r,viewedUser:i,appsCounters:o})}function jt(e){let{menu:t,parsedRoutersConfigs:n,currentUserRoles:r,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,permittedPagesMap:u,experiments:l,isMobile:c}=e;const d=Boolean((null==t?void 0:t.accountNavBar)&&t.accountNavBar.navBarItems&&t.accountNavBar.menuItems&&c),f=d?t.accountNavBar.navBarItems:t.navBarItems||[],p=d?null==t?void 0:t.accountNavBar.menuItems:t.menuItems||[],h=`${xe}-${t.id}`;let g=JSON.parse(s.getItem(h));if(!g){const e=JSON.stringify(p);s.setItem(h,e),g=p}const v=Lt({menuItems:f,parsedRoutersConfigs:n,userRoles:r,viewedUser:i,appsCounters:o,publicRouterPrefix:a,permittedPagesMap:u,experiments:l}),m=Lt({menuItems:g,parsedRoutersConfigs:n,userRoles:r,viewedUser:i,appsCounters:o,publicRouterPrefix:a,permittedPagesMap:u,experiments:l});d?(t.accountNavBar.navBarItems=v,t.accountNavBar.menuItems=m):(t.navBarItems=v,t.menuItems=m)}const Bt=e=>{let{menu:t,parsedRoutersConfigs:n,viewedUser:r,flowAPI:i}=e;return t.onItemClick((e=>{var t;let{item:o}=e;const s=function(e){let{item:t,viewedUser:n,parsedRoutersConfigs:r}=e;const i=t.link.replace(`/${n.slug}/`,`/${Pe}/`),o=null==r?void 0:r.find((e=>"public"===e.type)),s=null==r?void 0:r.find((e=>"private"===e.type)),a=i.split("/"),u=a.indexOf(Pe),l=u>-1?"/"+a.splice(u,a.length).join("/"):"/"+a[a.length-1],c=(null==o?void 0:o.patterns)||{},d=(null==s?void 0:s.patterns)||{};return c[l]||d[l]}({item:o,parsedRoutersConfigs:n,viewedUser:r}),{appDefinitionId:a,appPageId:u}=s.appData;null==(t=i.bi)||t.report({evid:866,src:69,endpoint:"members-app-uou",params:{pageName:u,component:"ma-navigation",originAppId:a,action:"menu-item-click"}})}))};function Ft(e){let{wixCodeApi:t,menu:n,parsedRoutersConfigs:r,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,permittedPagesMap:d,experiments:f,isMobile:p,flowAPI:h}=e;const g=p&&void 0!==n.options&&void 0===n.items,v=g?n.options||[]:n.items||[],m=`${Ce}-${n.id}`;let b=JSON.parse(l.getItem(m));if(!b){const e=JSON.stringify(v);l.setItem(m,e),b=v}const _=kt({menuItems:b,parsedRoutersConfigs:r,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,publicRouterPrefix:c,permittedPagesMap:d,experiments:f});Bt({menu:n,parsedRoutersConfigs:r,flowAPI:h,viewedUser:s}),g?(n.options=_,Dt({menu:n,options:_,viewedUser:s,wixCodeApi:t})):n.items=_}function Vt(e){let{$w:t,wixCodeApi:n,parsedRoutersConfigs:r=[],viewedUserRoles:i=[],currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,permittedPagesMap:d={},experiments:f,isMobile:p,flowAPI:h}=e;const g=t(Re),v=t(Ee);g.forEach((e=>Ft({wixCodeApi:n,menu:e,parsedRoutersConfigs:r,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,permittedPagesMap:d,experiments:f,isMobile:p,flowAPI:h}))),v.forEach((e=>Ft({wixCodeApi:n,menu:e,parsedRoutersConfigs:r,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,permittedPagesMap:d,experiments:f,isMobile:p,flowAPI:h})))}var $t=n(213),Wt=n.n($t);class Kt{constructor(e,t){this.httpClient=e,this.experiments=t,Wt()(this,"adminGroupId","00000000-0000-0000-0000-000000000001"),Wt()(this,"restrictedPagesContext","Pages"),Wt()(this,"permittedPagesExperiment",me.RestrictedMemberPagePermissions)}async getPermittedPagesMap(e,t){const n=Object.values(e);if(!this.shouldFetchPermittedPages(n,t))return{};const r=await this.fetchRestrictedPagesPermission();if(!this.hasRestrictedPages(r,n))return this.getPermittedPagesMapFallback(Object.keys(e),!0);const i=this.getNonRestrictedPages(r,n),o=this.getRestrictedMemberPages(r,n),s=await this.checkPermissionsForRestrictedPages(r.id,o);return this.toPermittedPagesMap(e,i,s)}toPermittedPagesMap(e,t,n){return Object.entries(e).reduce(((e,r)=>{let[i,o]=r;return t.includes(o)?{...e,[i]:!0}:{...e,[i]:n[o]}}),{})}getRestrictedMemberPages(e,t){return e.resourceIds.filter((e=>t.includes(e)))}getNonRestrictedPages(e,t){return t.filter((t=>!e.resourceIds.includes(t)))}getPermittedPagesMapFallback(e,t){return e.reduce(((e,n)=>({...e,[n]:t})),{})}async checkPermissionsForRestrictedPages(e,t){var n;const r=`/_api/members-groups-web/v1/permissions/${e}`,i={params:{resourceId:t}},o=this.getPermittedPagesMapFallback(t,!1);return await(null==(n=this.httpClient)?void 0:n.get(r,i).then((e=>{let{data:t}=e;return t.isPermitted})).catch((()=>null)))??o}async fetchRestrictedPagesPermission(){var e;const t=`/_api/members-groups-web/v1/groups/${this.adminGroupId}/permissions`,n=await(null==(e=this.httpClient)?void 0:e.get(t).then((e=>{let{data:t}=e;return t.permissions})).catch((()=>null)));return(null==n?void 0:n.find((e=>{let{context:t}=e;return this.restrictedPagesContext===t})))??null}hasRestrictedPages(e,t){return!(null==e||!e.resourceIds.length)&&t.some((t=>e.resourceIds.includes(t)))}shouldFetchPermittedPages(e,t){var n;return((null==(n=this.experiments)?void 0:n.enabled(this.permittedPagesExperiment))??!1)&&e.length>0&&"Site"===t}}const Gt=e=>{const t={};return e.forEach((e=>{Object.entries(e.pages??{}).forEach((e=>{let[n,r]=e;t[n]=r}))})),t};function Jt(e){const t=e.find((e=>"public"===JSON.parse(e.config).type));if(!t)return;const n=JSON.parse(t.config),r=t.prefix,i=Object.keys(n.patterns??{}),o=i.find((e=>!0===n.patterns[e].socialHome));if(o)return{routerPrefix:r,patternKey:o,pageData:n.patterns[o]};if(i.length>0){const e=i[0];return{routerPrefix:r,patternKey:e,pageData:n.patterns[e]}}}const Ht=()=>{};class qt{constructor(e){let{appRouters:t,routerReturnedData:n,wixCodeApi:r,cacheService:i,flowAPI:o}=e;Wt()(this,"wixLocation",void 0),Wt()(this,"wixSite",void 0),Wt()(this,"isMobile",void 0),Wt()(this,"appRouters",void 0),Wt()(this,"routerReturnedData",void 0),Wt()(this,"wixCodeApi",void 0),Wt()(this,"cacheService",void 0),Wt()(this,"flowAPI",void 0),this.wixLocation=r.location,this.wixSite=r.site,this.isMobile="Mobile"===r.window.formFactor,this.appRouters=t,this.routerReturnedData=n,this.wixCodeApi=r,this.cacheService=i,this.flowAPI=o}async matchRoute(e){let{appDefinitionId:t,sectionId:n,onSuccess:r=Ht,onError:i=Ht}=e;t&&n||i("Error: please provide app ID and section ID for navigation");let o=!1;if(this.appRouters.forEach((e=>{if(o)return;const i=JSON.parse(e.config);return i.patterns&&Object.keys(i.patterns).forEach((s=>{if(o)return;const a=i.patterns[s];a.appData&&a.appData.appDefinitionId===t&&a.appData.appPageId===n&&(o=!0,r(e.prefix,s))}))})),!o){const e=((await this.wixSite.getSiteStructure()).pages||[]).filter((e=>e.applicationId===t&&!e.prefix)).pop();return e?(o=!0,r("",e.url)):i(`Error: can not resolve route for app ${t} and page ${n}`)}}getRoute(e,t){return this.appRouters.find((n=>{const r=JSON.parse(n.config);return!!r.patterns&&Object.entries(r.patterns).some((n=>{var r,i;let[,o]=n;return(null==(r=o.appData)?void 0:r.appDefinitionId)===e&&(null==(i=o.appData)?void 0:i.appPageId)===t}))}))}getRouterOptions(e){const t=(e.appRouters||[]).map((e=>({...e,config:JSON.parse(e.config)}))),n=t.map((e=>e.config));return{publicRouterPrefix:t.find((e=>"public"===e.config.type)).prefix,parsedRoutersConfigs:n,parsedRouters:t}}getMenuRenderOptions(e){let{config:t,userService:n,appsCounters:r,enablePreview:i,flowAPI:o}=e;const{$w:s,appParams:a}=t,{parsedRoutersConfigs:u,publicRouterPrefix:l,parsedRouters:c}=this.getRouterOptions(a),d=n.getViewedUser();return{$w:s,wixCodeApi:this.wixCodeApi,publicRouterPrefix:l,parsedRoutersConfigs:u,appsCounters:r,memoryStorage:ct(),parsedConfigItems:De(t.config),currentUser:n.getCurrentUser(),viewedUser:i?{...d,id:"00000000-0000-0000-0000-000000000000"}:d,viewedUserRoles:n.getRoles()[d.id]||[],isMobile:this.isMobile,experiments:t.essentials.experiments,flowAPI:o,parsedRouters:c}}static hasSocialApp(e){const{applicationId:t}=e;return _e.indexOf(t)>-1}async hasSocialPages(e,t){if(!this.appRouters)throw t&&t("App routers not initialised"),new Error("App routers not initialised");const n=this.appRouters.filter((e=>{const t=JSON.parse(e.config);return"public"===t.type&&t.patterns&&Object.keys(t.patterns).length>0})),{pages:r}=await this.wixSite.getSiteStructure(),i=r.filter(qt.hasSocialApp);return e&&e(n.length>0||i.length>0),n.length>0||i.length>0}async getViewedUser(e,t){var n;const r=null==(n=this.routerReturnedData)?void 0:n.memberData.memberContactId;if(r)return e&&e(r),r;throw t&&t("Error getting viewed user"),new Error("Error getting viewed user")}async navigateToSection(e,t){let{appDefinitionId:n,sectionId:r,tpaInnerRoute:i="",memberId:o=""}=e;await this.matchRoute({appDefinitionId:n,sectionId:r,onSuccess:(e,t)=>{var n,r;e&&0!==e.indexOf("/")&&(e=`/${e}`),i&&"/"!==i.charAt(0)&&(i="/"+i),null==(n=(r=this.wixLocation).to)||n.call(r,`${e}${o?t.replace(Pe,o):t}${i}`)},onError:e=>{throw t&&t(e),new Error(e)}})}async getSectionUrl(e,t){let{appDefinitionId:n,sectionId:r,memberId:i="",memberSlug:o}=e;return new Promise(((e,s)=>{const a=o||i;this.matchRoute({appDefinitionId:n,sectionId:r,onSuccess:(n,r)=>{n&&0===n.indexOf("/")&&(n=n.substring(1)),n||0!==r.indexOf("/")||(r=r.substring(1));let i=this.wixLocation.baseUrl;"/"!==i.slice(-1)&&(i+="/");const o=Object.keys(this.wixLocation.query).map((e=>`${e}=${this.wixLocation.query[e]}`)).join("&");t&&t(`${i}${n}${a?r.replace(Pe,a):r}${o?"?"+o:""}`),e(`${i}${n}${a?r.replace(Pe,a):r}${o?"?"+o:""}`)},onError:()=>{t&&t(this.wixLocation.url),s(this.wixLocation.url)}})}))}async getNavigatableRoles(e){const t=Jt(this.appRouters);if(t){var n;return{navigatableMembersRoles:(null==(n=t.pageData.appData)?void 0:n.visibleForRoles)??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async navigateToMember(e,t){let{memberId:n,memberSlug:r}=e;const i=r||n;if(!n)throw t&&t("Error: please provide site member ID"),new Error("Error: please provide site member ID");const o=Jt(this.appRouters);if(o){var s,a;const e=`/${o.routerPrefix}${o.patternKey.replace(Pe,i)}`;null==(s=(a=this.wixLocation).to)||s.call(a,e)}}async getMemberPagePrefix(e,t,n){let{type:r="public"}=e;if(!this.appRouters)throw n&&n(`Can not get prefix for type ${r} - no routers`),new Error(`Can not get prefix for type ${r} - no routers`);const i=this.appRouters.filter((e=>JSON.parse(e.config).type===r)).pop();if(!i)throw n&&n(`Can not get prefix for type ${r}`),new Error(`Can not get prefix for type ${r}`);return t&&t({type:r,prefix:i.prefix}),{type:r,prefix:i.prefix}}updateCounterForNotificationApp(e,t){return{...e,apps:null!=e&&e.apps?e.apps.map((e=>{var n;return e.appDefId===we?{...e,numbers:{...e.numbers,notificationsCount:{...null==(n=e.numbers)?void 0:n.notificationsCount,count:t??0}}}:e})):[]}}async setNotificationCount(e){var t;let{config:n,userService:r,displayCount:i}=e;const o=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(n.appParams.appDefinitionId),s=r.getCurrentUser(),a=r.getViewedUser(),u=this.updateCounterForNotificationApp(this.cacheService.getNumbers(o,s.id),i);this.cacheService.setNumbers(o,s.id,u);const l=this.getMenuRenderOptions({config:n,userService:r,appsCounters:u,enablePreview:!1,flowAPI:this.flowAPI}),{publicRouterPrefix:c,parsedRouters:d,parsedRoutersConfigs:f,parsedConfigItems:p,viewedUserRoles:h}=l,g={counters:{currentUserCounters:u,viewedUserCounters:this.cacheService.getNumbers(o,a.id)??void 0},permittedPagesMap:{},parsedRouters:d,parsedRoutersConfigs:f,parsedConfigItems:p,currentUserRoles:r.getRoles()[s.id],viewedUserRoles:h,publicRouterPrefix:c};return at("renderMembersMenuItems",(()=>un(n,g,this.flowAPI)))()}async enterPublicProfilePreviewMode(e){var t;let{config:n,userService:r}=e;const{appParams:i}=n,o=r.getViewedUser(),s=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(i.appDefinitionId),a=this.cacheService.hasNumbers(s,o.id)?this.cacheService.getNumbers(s,o.id):r.fetchMenuCounters(o),u=this.getMenuRenderOptions({config:n,userService:r,appsCounters:a,enablePreview:!0,flowAPI:this.flowAPI});return at("renderMembersMenuItems",(()=>Vt(u)))()}leavePublicProfilePreviewMode(e){var t;let{config:n,userService:r}=e;const{appParams:i}=n,o=r.getViewedUser(),s=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(i.appDefinitionId),a=this.cacheService.hasNumbers(s,o.id)?this.cacheService.getNumbers(s,o.id):r.fetchMenuCounters(o),u=this.getMenuRenderOptions({config:n,userService:r,appsCounters:a,enablePreview:!1,flowAPI:this.flowAPI});return at("renderMembersMenuItems",(()=>Vt(u)))()}clearMenus(e){let{config:t}=e;return function(e){const t=e(Re),n=e(Ee);t.forEach((e=>{e.items=[]})),n.forEach((e=>{e.items=[]}))}(null==t?void 0:t.$w)}getIsMembersAreaSeoEnabled(e){let{config:t}=e;const n=null==t?void 0:t.config.isMembersAreaSeoEnabled;return Promise.resolve(n)}isAppSectionInstalled(e){let{appDefinitionId:t,sectionId:n}=e;return!!this.getRoute(t,n)}}class zt{constructor(e){this.storage=e}hasCurrentUser(e){const t=this.getCurrentUserCacheKey(e);return this.hasItemInStorage(t)}getCurrentUser(e){const t=this.getCurrentUserCacheKey(e);return this.getItemFromStorage(t)}setCurrentUser(e,t){const n=this.getCurrentUserCacheKey(e);return this.setItemToStorage(n,t)}hasViewedUser(e,t){const n=this.getViewedUserCacheKey(e,t);return this.hasItemInStorage(n)}getViewedUser(e,t){const n=this.getViewedUserCacheKey(e,t);return this.getItemFromStorage(n)}setViewedUser(e,t,n){const r=this.getViewedUserCacheKey(e,t);return this.setItemToStorage(r,n)}hasRoles(e,t){const n=this.getRolesCacheKey(e,t);return this.hasItemInStorage(n)}getRoles(e,t){const n=this.getRolesCacheKey(e,t);return this.getItemFromStorage(n)}setRoles(e,t,n){const r=this.getRolesCacheKey(e,t);return this.setItemToStorage(r,n)}hasNumbers(e,t){const n=this.getNumbersCacheKey(e,t);return this.hasItemInStorage(n)}getNumbers(e,t){const n=this.getNumbersCacheKey(e,t);return this.getItemFromStorage(n)}setNumbers(e,t,n){const r=this.getNumbersCacheKey(e,t);return this.setItemToStorage(r,n)}hasItemInStorage(e){return!!this.storage.getItem(e)}getItemFromStorage(e){const t=this.storage.getItem(e);return t?JSON.parse(t):null}setItemToStorage(e,t){return this.storage.setItem(e,JSON.stringify(t))}getCurrentUserCacheKey(e){return`cu-${e}`}getViewedUserCacheKey(e,t){return`vu-${t}-${e}`}getRolesCacheKey(e,t){return t?`roles-${t}-${e}`:`roles-${e}`}getNumbersCacheKey(e,t){return`numbers-${t}-${e}`}}let Xt,Yt,Zt,Qt,en,tn;const nn=async(e,t,n,r,i)=>{let{appDefinitionId:o,routerReturnedData:s,appRouters:a=[]}=e,{storage:u}=t;var l,c;if(Qt=xt(n,i,r),tn=(e=>new zt(e.memory))(u),l=r.httpClient,c=r.experiments,en=new Kt(l,c),Zt=new qt({appRouters:a,routerReturnedData:s,wixCodeApi:n,cacheService:tn,flowAPI:r}),function(e){lt=e}(u.memory),await Qt.setCurrentUser(n.user.currentUser,r.httpClient),!s)return Promise.resolve();const d=null==n.site.getAppToken?void 0:n.site.getAppToken(o),f=s.memberData&&s.memberData.slugs||[],p=s.memberData&&s.memberData.memberContactId||s.userId,h=f.find((e=>e.primary)),g={id:p,slug:h&&h.name||p};Qt.setViewedUser(g),Qt.setRoles(s.roles||{}),s.roles&&tn.setRoles(d,p,s.roles)},rn=async(e,t)=>{if(t)return{currentUserCounters:void 0,viewedUserCounters:void 0};const n=Qt.getCurrentUser(),r=Qt.getViewedUser(),i=async t=>{if(tn.hasNumbers(e,t.id))return tn.getNumbers(e,t.id);const n=await Qt.fetchMenuCounters(t);return tn.setNumbers(e,t.id,n),n},o=r.id===n.id,s=i(n),a=o?s:r.id?i(r):Promise.resolve({apps:[]}),[u,l]=await Promise.all([s,a]);return{currentUserCounters:u,viewedUserCounters:l}},on=async(e,t)=>{const n=Qt.getCurrentUser(),r=Qt.getViewedUser();if(tn.hasRoles(e,null==r?void 0:r.id))return tn.getRoles(e,null==r?void 0:r.id);const i=await Qt.fetchRoles(r.id,n.id,t);return tn.setRoles(e,null==r?void 0:r.id,i),i};function sn(e,t,n){const{wixCodeApi:r,$w:i}=e,o=Qt.getViewedUser(),s=Qt.getCurrentUser(),a="Mobile"===r.window.formFactor,u=ct(),{permittedPagesMap:l,parsedRoutersConfigs:c,viewedUserRoles:d,parsedConfigItems:f,counters:{viewedUserCounters:p},publicRouterPrefix:h}=t;at("renderMembersMenuItems",(()=>Vt({$w:i,wixCodeApi:r,parsedRoutersConfigs:c,viewedUserRoles:d,viewedUser:o,currentUser:s,appsCounters:p,parsedConfigItems:f,memoryStorage:u,publicRouterPrefix:h,permittedPagesMap:l,experiments:n.experiments,isMobile:a,flowAPI:n})))()}function an(e,t){const{$w:n,essentials:{experiments:r},wixCodeApi:i}=e,o=Qt.getCurrentUser(),s="Mobile"===i.window.formFactor,a=ct(),{permittedPagesMap:u,parsedRoutersConfigs:l,counters:{currentUserCounters:c},publicRouterPrefix:d,currentUserRoles:f}=t;at("renderLoginMenuItems",(()=>function(e){let{$w:t,parsedRoutersConfigs:n=[],currentUserRoles:r,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,permittedPagesMap:u={},experiments:l,isMobile:c}=e;if(i.loggedIn){const e=t(Me),d=t(Oe);e.forEach((e=>jt({menu:e,parsedRoutersConfigs:n,currentUserRoles:r,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,permittedPagesMap:u,experiments:l,isMobile:c}))),d.forEach((e=>jt({menu:e,parsedRoutersConfigs:n,currentUserRoles:r,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,permittedPagesMap:u,experiments:l,isMobile:c}))),Rt.setMembersLoginWidgets([...Rt.getMembersLoginWidgets(),...e,...d])}}({$w:n,parsedRoutersConfigs:l,currentUserRoles:f,currentUser:o,appsCounters:c,memoryStorage:a,publicRouterPrefix:d,permittedPagesMap:u,experiments:r,isMobile:s,wixCodeApi:i})))()}function un(e,t,n){an(e,t),sn(e,t,n)}const ln=e=>{Xt=e},cn=(e,t)=>Qt.setCurrentUser(e,t),dn=(e,t,n)=>{const r=((e,t)=>{const{prefix:n,path:r}=e.location,i=t.find((e=>{let{config:{type:t}}=e;return"public"===t}));if((null==i?void 0:i.prefix)===n){const[,...e]=r;return`/${n}/${Pe}/${e.join("/")}`}return`/${n}/${r.join("/")}`})(t,n),i=e=>{if(e.onChange){var t;const n=null==(t=e.options)?void 0:t.find((e=>{let{link:t}=e;return t===r}));e.value=(null==n?void 0:n.value)??e.value}};e(Re).forEach(i),e(Ee).forEach(i)},fn=async e=>{let{controllerConfig:t,appData:n,flowAPI:r}=e;const{wixCodeApi:i,$w:o}=t,s=t,a=!!o(Me).length,u=!!o(Oe).length,l=!!o(Re).length,c=!!o(Ee).length,d=a||u||l||c;if((e=>{Yt=e})(s),!d)return{async pageReady(){await(null==n?void 0:n.initApplication())}};const f="Editor"===i.window.viewMode;return ln(s),{async pageReady(){const e=await(null==n?void 0:n.initApplication());i.user.onLogin((t=>at("onLogin",(()=>cn(t,r.httpClient).then((()=>un(s,e,r)))))())),f?r.environment.isMobile&&dn(o,i,e.parsedRouters):un(s,e,r)}}},pn=async e=>{let{controllerConfig:t}=e;const n=t;return Rt.setGlobalControllerConfig(n),{async pageReady(){}}},hn=async e=>{let{controllerConfig:t}=e;const n=t;return Rt.setGlobalControllerConfig(n),{async pageReady(){}}},gn=async e=>!!await(null==e?void 0:e.site.isAppSectionInstalled({sectionId:"member_page",appDefinitionId:be.rH})),vn=async e=>!!e&&e.site.isAppSectionInstalled({sectionId:"member_settings_page",appDefinitionId:be.rH}),mn=async e=>(await(async e=>{const[t,n]=await Promise.all([vn(e.controllerConfig.wixCodeApi),gn(e.controllerConfig.wixCodeApi)]);return t?hn:n?pn:fn})(e.flowAPI))(e);function bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var _n={};function yn(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:_n}var wn=Object.assign,Pn=Object.getOwnPropertyDescriptor,Sn=Object.defineProperty,In=Object.prototype,An=[];Object.freeze(An);var Cn={};Object.freeze(Cn);var xn="undefined"!=typeof Proxy,Mn=Object.toString();function Rn(){xn||bn("Proxy not available")}function On(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var En=function(){};function Nn(e){return"function"==typeof e}function Dn(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function Un(e){return null!==e&&"object"==typeof e}function Tn(e){if(!Un(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Mn}function kn(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function Ln(e,t,n){Sn(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function jn(e,t,n){Sn(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Bn(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Un(e)&&!0===e[n]}}function Fn(e){return null!=e&&"[object Map]"===Object.prototype.toString.call(e)}function Vn(e){return null!=e&&"[object Set]"===Object.prototype.toString.call(e)}var $n=void 0!==Object.getOwnPropertySymbols;var Wn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:$n?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Kn(e){return null===e?null:"object"==typeof e?""+e:e}function Gn(e,t){return In.hasOwnProperty.call(e,t)}var Jn=Object.getOwnPropertyDescriptors||function(e){var t={};return Wn(e).forEach((function(n){t[n]=Pn(e,n)})),t};function Hn(e,t){return!!(e&t)}function qn(e,t,n){return n?e|=t:e&=~t,e}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}function Yn(e,t,n){return t&&Xn(e.prototype,t),n&&Xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(null,arguments)}function er(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tr(e,t)}function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tr(e,t)}function nr(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var rr=Symbol("mobx-stored-annotations");function ir(e){return Object.assign((function(t,n){if(sr(n))return e.decorate_20223_(t,n);or(t,n,e)}),e)}function or(e,t,n){Gn(e,rr)||Ln(e,rr,Qn({},e[rr])),function(e){return e.annotationType_===hr}(n)||(e[rr][t]=n)}function sr(e){return"object"==typeof e&&"string"==typeof e.kind}var ar=Symbol("mobx administration"),ur=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=fi.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return ki(this)},t.reportChanged=function(){Ui(),Li(this),Ti()},t.toString=function(){return this.name_},Yn(e,[{key:"isBeingObserved",get:function(){return Hn(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=qn(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return Hn(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=qn(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return Hn(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=qn(this.flags_,e.diffValueMask_,1===t)}}])}();ur.isBeingObservedMask_=1,ur.isPendingUnobservationMask_=2,ur.diffValueMask_=4;var lr=Bn("Atom",ur);function cr(e,t,n){void 0===t&&(t=En),void 0===n&&(n=En);var r,i=new ur(e);return t!==En&&ao(io,i,t,r),n!==En&&so(i,n),i}var dr={identity:function(e,t){return e===t},structural:function(e,t){return As(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return As(e,t,1)}};function fr(e,t,n){return yo(e)?e:Array.isArray(e)?Xr.array(e,{name:n}):Tn(e)?Xr.object(e,void 0,{name:n}):Fn(e)?Xr.map(e,{name:n}):Vn(e)?Xr.set(e,{name:n}):"function"!=typeof e||eo(e)||bo(e)?e:kn(e)?vo(e):Qi(n,e)}function pr(e){return e}var hr="override";function gr(e,t){return{annotationType_:e,options_:t,make_:vr,extend_:mr,decorate_20223_:br}}function vr(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(eo(n.value))return 1;var o=_r(e,this,t,n,!1);return Sn(r,t,o),2}function mr(e,t,n,r){var i=_r(e,this,t,n);return e.defineProperty_(t,i,r)}function br(e,t){var n,r=t.kind,i=t.name,o=t.addInitializer,s=this,a=function(e){var t,n,r,o;return oi(null!=(t=null==(n=s.options_)?void 0:n.name)?t:i.toString(),e,null!=(r=null==(o=s.options_)?void 0:o.autoAction)&&r)};return"field"==r?function(e){var t,n=e;return eo(n)||(n=a(n)),null!=(t=s.options_)&&t.bound&&((n=n.bind(this)).isMobxAction=!0),n}:"method"==r?(eo(e)||(e=a(e)),null!=(n=this.options_)&&n.bound&&o((function(){var e=this,t=e[i].bind(e);t.isMobxAction=!0,e[i]=t})),e):void bn("Cannot apply '"+s.annotationType_+"' to '"+String(i)+"' (kind: "+r+"):\n'"+s.annotationType_+"' can only be used on properties with a function value.")}function _r(e,t,n,r,i){var o,s,a,u,l,c,d,f;void 0===i&&(i=Oi.safeDescriptors),f=r,t.annotationType_,f.value;var p,h=r.value;null!=(o=t.options_)&&o.bound&&(h=h.bind(null!=(p=e.proxy_)?p:e.target_));return{value:oi(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),h,null!=(u=null==(l=t.options_)?void 0:l.autoAction)&&u,null!=(c=t.options_)&&c.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function yr(e,t){return{annotationType_:e,options_:t,make_:wr,extend_:Pr,decorate_20223_:Sr}}function wr(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!Gn(e.target_,t)||!bo(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(bo(n.value))return 1;var o=Ir(e,this,t,n,!1,!1);return Sn(r,t,o),2}function Pr(e,t,n,r){var i,o=Ir(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function Sr(e,t){var n;var r=t.name,i=t.addInitializer;return bo(e)||(e=vo(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function Ir(e,t,n,r,i,o){var s;void 0===o&&(o=Oi.safeDescriptors),s=r,t.annotationType_,s.value;var a,u=r.value;(bo(u)||(u=vo(u)),i)&&((u=u.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:u,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function Ar(e,t){return{annotationType_:e,options_:t,make_:Cr,extend_:xr,decorate_20223_:Mr}}function Cr(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function xr(e,t,n,r){return function(e,t,n,r){t.annotationType_,r.get;0}(0,this,0,n),e.defineComputedProperty_(t,Qn({},this.options_,{get:n.get,set:n.set}),r)}function Mr(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=ns(this)[ar],i=Qn({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new di(i))})),function(){return this[ar].getObservablePropValue_(r)}}function Rr(e,t){return{annotationType_:e,options_:t,make_:Or,extend_:Er,decorate_20223_:Nr}}function Or(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Er(e,t,n,r){var i,o;return function(e,t,n,r){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:fr,r)}function Nr(e,t){var n=this,r=t.kind,i=t.name,o=new WeakSet;function s(e,t){var r,s,a=ns(e)[ar],u=new ci(t,null!=(r=null==(s=n.options_)?void 0:s.enhancer)?r:fr,"ObservableObject."+i.toString(),!1);a.values_.set(i,u),o.add(e)}if("accessor"==r)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[ar].getObservablePropValue_(i)},set:function(e){return o.has(this)||s(this,e),this[ar].setObservablePropValue_(i,e)},init:function(e){return o.has(this)||s(this,e),e}}}var Dr="true",Ur=Tr();function Tr(e){return{annotationType_:Dr,options_:e,make_:kr,extend_:Lr,decorate_20223_:jr}}function kr(e,t,n,r){var i,o,s,a;if(n.get)return ei.make_(e,t,n,r);if(n.set){var u=oi(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!Oi.safeDescriptors||e.isPlainObject_,set:u})?0:2:(Sn(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"==typeof n.value)return kn(n.value)?(null!=(a=this.options_)&&a.autoBind?vo.bound:vo).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?Qi.bound:Qi).make_(e,t,n,r);var l,c=!1===(null==(i=this.options_)?void 0:i.deep)?Xr.ref:Xr;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return c.make_(e,t,n,r)}function Lr(e,t,n,r){var i,o,s;if(n.get)return ei.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!Oi.safeDescriptors||e.isPlainObject_,set:oi(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Xr.ref:Xr).extend_(e,t,n,r)}function jr(e,t){bn("'"+this.annotationType_+"' cannot be used as a decorator")}var Br={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Fr(e){return e||Br}Object.freeze(Br);var Vr=Rr("observable"),$r=Rr("observable.ref",{enhancer:pr}),Wr=Rr("observable.shallow",{enhancer:function(e,t,n){return null==e||os(e)||$o(e)||Ho(e)||Yo(e)?e:Array.isArray(e)?Xr.array(e,{name:n,deep:!1}):Tn(e)?Xr.object(e,void 0,{name:n,deep:!1}):Fn(e)?Xr.map(e,{name:n,deep:!1}):Vn(e)?Xr.set(e,{name:n,deep:!1}):void 0}}),Kr=Rr("observable.struct",{enhancer:function(e,t){return As(e,t)?t:e}}),Gr=ir(Vr);function Jr(e){return!0===e.deep?fr:!1===e.deep?pr:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:fr;var t,n,r}function Hr(e,t,n){return sr(t)?Vr.decorate_20223_(e,t):Dn(t)?void or(e,t,Vr):yo(e)?e:Tn(e)?Xr.object(e,t,n):Array.isArray(e)?Xr.array(e,t):Fn(e)?Xr.map(e,t):Vn(e)?Xr.set(e,t):"object"==typeof e&&null!==e?e:Xr.box(e,t)}wn(Hr,Gr);var qr,zr,Xr=wn(Hr,{box:function(e,t){var n=Fr(t);return new ci(e,Jr(n),n.name,!0,n.equals)},array:function(e,t){var n=Fr(t);return(!1===Oi.useProxies||!1===n.proxy?bs:To)(e,Jr(n),n.name)},map:function(e,t){var n=Fr(t);return new Jo(e,Jr(n),n.name)},set:function(e,t){var n=Fr(t);return new Xo(e,Jr(n),n.name)},object:function(e,t,n){return Ps((function(){return co(!1===Oi.useProxies||!1===(null==n?void 0:n.proxy)?ns({},n):function(e,t){var n,r;return Rn(),e=ns(e,t),null!=(r=(n=e[ar]).proxy_)?r:n.proxy_=new Proxy(e,So)}({},n),e,t)}))},ref:ir($r),shallow:ir(Wr),deep:Gr,struct:ir(Kr)}),Yr="computed",Zr=Ar(Yr),Qr=Ar("computed.struct",{equals:dr.structural}),ei=function(e,t){if(sr(t))return Zr.decorate_20223_(e,t);if(Dn(t))return or(e,t,Zr);if(Tn(e))return ir(Ar(Yr,e));var n=Tn(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new di(n)};Object.assign(ei,Zr),ei.struct=ir(Qr);var ti=0,ni=1,ri=null!=(qr=null==(zr=Pn((function(){}),"name"))?void 0:zr.configurable)&&qr,ii={value:"action",configurable:!0,writable:!1,enumerable:!1};function oi(e,t,n,r){function i(){return si(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},ri&&(ii.value=e,Sn(i,"name",ii)),i}function si(e,t,n,r,i){var o=function(e,t,n,r){var i=!1,o=0;0;var s=Oi.trackingDerivation,a=!t||!s;Ui();var u=Oi.allowStateChanges;a&&(Pi(),u=ui(!0));var l=Ii(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:i,startTime_:o,actionId_:ni++,parentActionId_:ti};return ti=c.actionId_,c}(0,t);try{return n.apply(r,i)}catch(e){throw o.error_=e,e}finally{!function(e){ti!==e.actionId_&&bn(30);ti=e.parentActionId_,void 0!==e.error_&&(Oi.suppressReactionErrors=!0);li(e.prevAllowStateChanges_),Ai(e.prevAllowStateReads_),Ti(),e.runAsAction_&&Si(e.prevDerivation_);0;Oi.suppressReactionErrors=!1}(o)}}function ai(e,t){var n=ui(e);try{return t()}finally{li(n)}}function ui(e){var t=Oi.allowStateChanges;return Oi.allowStateChanges=e,t}function li(e){Oi.allowStateChanges=e}var ci=function(e){function t(t,n,r,i,o){var s;return void 0===r&&(r="ObservableValue"),void 0===i&&(i=!0),void 0===o&&(o=dr.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=o,s.value_=n(t,void 0,r),s}er(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==Oi.UNCHANGED){0,this.setNewValue_(e)}},n.prepareNewValue_=function(e){if(bi(this),Io(this)){var t=Co(this,{object:this,type:No,newValue:e});if(!t)return Oi.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Oi.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),xo(this)&&Ro(this,{type:No,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Ao(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:No,newValue:this.value_,oldValue:void 0}),Mo(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Kn(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},t}(ur),di=function(){function e(e){this.dependenciesState_=fi.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=fi.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new gi(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=pi.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||bn(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=oi("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?dr.structural:dr.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==fi.UP_TO_DATE_)return;e.lowestObserverState_=fi.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===fi.UP_TO_DATE_&&(e.dependenciesState_=fi.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing&&bn(32,this.name_,this.derivation),0!==Oi.inBatch||0!==this.observers_.size||this.keepAlive_){if(ki(this),mi(this)){var e=Oi.trackingContext;this.keepAlive_&&!e&&(Oi.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===fi.STALE_)return;e.lowestObserverState_=fi.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===fi.POSSIBLY_STALE_?t.dependenciesState_=fi.STALE_:t.dependenciesState_===fi.UP_TO_DATE_&&(e.lowestObserverState_=fi.UP_TO_DATE_)}))}(this),Oi.trackingContext=e}}else mi(this)&&(this.warnAboutUntrackedRead_(),Ui(),this.value_=this.computeValue_(!1),Ti());var t=this.value_;if(vi(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter&&bn(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter=!1}}else bn(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===fi.NOT_TRACKING_,n=this.computeValue_(!0),r=t||vi(e)||vi(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing=!0;var t,n=ui(!1);if(e)t=_i(this,this.derivation,this.scope_);else if(!0===Oi.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new gi(e)}return li(n),this.isComputing=!1,t},t.suspend_=function(){this.keepAlive_||(yi(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return to((function(){var o=n.get();if(!r||t){var s=Pi();e({observableKind:"computed",debugObjectName:n.name_,type:No,object:n,newValue:o,oldValue:i}),Si(s)}r=!1,i=o}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Kn(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Yn(e,[{key:"isComputing",get:function(){return Hn(this.flags_,e.isComputingMask_)},set:function(t){this.flags_=qn(this.flags_,e.isComputingMask_,t)}},{key:"isRunningSetter",get:function(){return Hn(this.flags_,e.isRunningSetterMask_)},set:function(t){this.flags_=qn(this.flags_,e.isRunningSetterMask_,t)}},{key:"isBeingObserved",get:function(){return Hn(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=qn(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return Hn(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=qn(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return Hn(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=qn(this.flags_,e.diffValueMask_,1===t)}}])}();di.isComputingMask_=1,di.isRunningSetterMask_=2,di.isBeingObservedMask_=4,di.isPendingUnobservationMask_=8,di.diffValueMask_=16;var fi,pi,hi=Bn("ComputedValue",di);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(fi||(fi={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(pi||(pi={}));var gi=function(e){this.cause=void 0,this.cause=e};function vi(e){return e instanceof gi}function mi(e){switch(e.dependenciesState_){case fi.UP_TO_DATE_:return!1;case fi.NOT_TRACKING_:case fi.STALE_:return!0;case fi.POSSIBLY_STALE_:for(var t=Ii(!0),n=Pi(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(hi(s)){if(Oi.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return Si(n),Ai(t),!0}if(e.dependenciesState_===fi.STALE_)return Si(n),Ai(t),!0}}return Ci(e),Si(n),Ai(t),!1}}function bi(e){}function _i(e,t,n){var r=Ii(!0);Ci(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Oi.runId;var i,o=Oi.trackingDerivation;if(Oi.trackingDerivation=e,Oi.inBatch++,!0===Oi.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new gi(e)}return Oi.inBatch--,Oi.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=fi.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var u=t[o];0===u.diffValue&&Ni(u,e),u.diffValue=0}for(;i--;){var l=n[i];1===l.diffValue&&(l.diffValue=0,Ei(l,e))}r!==fi.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Ai(r),i}function yi(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Ni(t[n],e);e.dependenciesState_=fi.NOT_TRACKING_}function wi(e){var t=Pi();try{return e()}finally{Si(t)}}function Pi(){var e=Oi.trackingDerivation;return Oi.trackingDerivation=null,e}function Si(e){Oi.trackingDerivation=e}function Ii(e){var t=Oi.allowStateReads;return Oi.allowStateReads=e,t}function Ai(e){Oi.allowStateReads=e}function Ci(e){if(e.dependenciesState_!==fi.UP_TO_DATE_){e.dependenciesState_=fi.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=fi.UP_TO_DATE_}}var xi=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Mi=!0,Ri=!1,Oi=function(){var e=yn();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Mi=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new xi).version&&(Mi=!1),Mi?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new xi):(setTimeout((function(){Ri||bn(35)}),1),new xi)}();function Ei(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Ni(e,t){e.observers_.delete(t),0===e.observers_.size&&Di(e)}function Di(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Oi.pendingUnobservations.push(e))}function Ui(){Oi.inBatch++}function Ti(){if(0==--Oi.inBatch){Vi();for(var e=Oi.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof di&&n.suspend_())}Oi.pendingUnobservations=[]}}function ki(e){var t=Oi.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&Oi.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(0===e.observers_.size&&Oi.inBatch>0&&Di(e),!1)}function Li(e){e.lowestObserverState_!==fi.STALE_&&(e.lowestObserverState_=fi.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===fi.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=fi.STALE_})))}var ji=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=fi.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=pi.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,Oi.pendingReactions.push(this),Vi())},t.runReaction_=function(){if(!this.isDisposed){Ui(),this.isScheduled=!1;var e=Oi.trackingContext;if(Oi.trackingContext=this,mi(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Oi.trackingContext=e,Ti()}},t.track=function(e){if(!this.isDisposed){Ui();0,this.isRunning=!0;var t=Oi.trackingContext;Oi.trackingContext=this;var n=_i(this,e,void 0);Oi.trackingContext=t,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&yi(this),vi(n)&&this.reportExceptionInDerivation_(n.cause),Ti()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Oi.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Oi.suppressReactionErrors||console.error(n,e),Oi.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Ui(),yi(this),Ti()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[ar]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},Yn(e,[{key:"isDisposed",get:function(){return Hn(this.flags_,e.isDisposedMask_)},set:function(t){this.flags_=qn(this.flags_,e.isDisposedMask_,t)}},{key:"isScheduled",get:function(){return Hn(this.flags_,e.isScheduledMask_)},set:function(t){this.flags_=qn(this.flags_,e.isScheduledMask_,t)}},{key:"isTrackPending",get:function(){return Hn(this.flags_,e.isTrackPendingMask_)},set:function(t){this.flags_=qn(this.flags_,e.isTrackPendingMask_,t)}},{key:"isRunning",get:function(){return Hn(this.flags_,e.isRunningMask_)},set:function(t){this.flags_=qn(this.flags_,e.isRunningMask_,t)}},{key:"diffValue",get:function(){return Hn(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=qn(this.flags_,e.diffValueMask_,1===t)}}])}();ji.isDisposedMask_=1,ji.isScheduledMask_=2,ji.isTrackPendingMask_=4,ji.isRunningMask_=8,ji.diffValueMask_=16;var Bi=100,Fi=function(e){return e()};function Vi(){Oi.inBatch>0||Oi.isRunningReactions||Fi($i)}function $i(){Oi.isRunningReactions=!0;for(var e=Oi.pendingReactions,t=0;e.length>0;){++t===Bi&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}Oi.isRunningReactions=!1}var Wi=Bn("Reaction",ji);var Ki="action",Gi="autoAction",Ji="<unnamed action>",Hi=gr(Ki),qi=gr("action.bound",{bound:!0}),zi=gr(Gi,{autoAction:!0}),Xi=gr("autoAction.bound",{autoAction:!0,bound:!0});function Yi(e){return function(t,n){return Nn(t)?oi(t.name||Ji,t,e):Nn(n)?oi(t,n,e):sr(n)?(e?zi:Hi).decorate_20223_(t,n):Dn(n)?or(t,n,e?zi:Hi):Dn(t)?ir(gr(e?Gi:Ki,{name:t,autoAction:e})):void 0}}var Zi=Yi(!1);Object.assign(Zi,Hi);var Qi=Yi(!0);function eo(e){return Nn(e)&&!0===e.isMobxAction}function to(e,t){var n,r,i,o;void 0===t&&(t=Cn);var s,a=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)s=new ji(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var u=ro(t),l=!1;s=new ji(a,(function(){l||(l=!0,u((function(){l=!1,s.isDisposed||s.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(s)}return null!=(i=t)&&null!=(i=i.signal)&&i.aborted||s.schedule_(),s.getDisposer_(null==(o=t)?void 0:o.signal)}Object.assign(Qi,zi),Zi.bound=ir(qi),Qi.bound=ir(Xi);var no=function(e){return e()};function ro(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:no}var io="onBO",oo="onBUO";function so(e,t,n){return ao(oo,e,t,n)}function ao(e,t,n,r){var i="function"==typeof r?_s(t,n):_s(t),o=Nn(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var uo="always";function lo(e){!0===e.isolateGlobalState&&function(){if((Oi.pendingReactions.length||Oi.inBatch||Oi.isRunningReactions)&&bn(36),Ri=!0,Mi){var e=yn();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),Oi=new xi}}();var t,n,r=e.useProxies,i=e.enforceActions;if(void 0!==r&&(Oi.useProxies=r===uo||"never"!==r&&"undefined"!=typeof Proxy),"ifavailable"===r&&(Oi.verifyProxies=!0),void 0!==i){var o=i===uo?uo:"observed"===i;Oi.enforceActions=o,Oi.allowStateChanges=!0!==o&&o!==uo}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(Oi[t]=!!e[t])})),Oi.allowStateReads=!Oi.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=Fi,Fi=function(e){return t((function(){return n(e)}))})}function co(e,t,n,r){var i=Jn(t);return Ps((function(){var t=ns(e,r)[ar];Wn(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}var fo=0;function po(){this.message="FLOW_CANCELLED"}po.prototype=Object.create(Error.prototype);var ho=yr("flow"),go=yr("flow.bound",{bound:!0}),vo=Object.assign((function(e,t){if(sr(t))return ho.decorate_20223_(e,t);if(Dn(t))return or(e,t,ho);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++fo,o=Zi(r+" - runid: "+i+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function u(e){var t;s=void 0;try{t=Zi(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function l(e){var t;s=void 0;try{t=Zi(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!Nn(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(u,l);e.then(c,n)}e=n,u(void 0)}));return a.cancel=Zi(r+" - runid: "+i+" - cancel",(function(){try{s&&mo(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(En,En),mo(n),e(new po)}catch(t){e(t)}})),a};return i.isMobXFlow=!0,i}),ho);function mo(e){Nn(e.cancel)&&e.cancel()}function bo(e){return!0===(null==e?void 0:e.isMobXFlow)}function _o(e,t){return!!e&&(void 0!==t?!!os(e)&&e[ar].values_.has(t):os(e)||!!e[ar]||lr(e)||Wi(e)||hi(e))}function yo(e){return _o(e)}function wo(e,t){void 0===t&&(t=void 0),Ui();try{return e.apply(t)}finally{Ti()}}function Po(e){return e[ar]}vo.bound=ir(go);var So={has:function(e,t){return Po(e).has_(t)},get:function(e,t){return Po(e).get_(t)},set:function(e,t,n){var r;return!!Dn(t)&&(null==(r=Po(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!Dn(t)&&(null==(n=Po(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Po(e).defineProperty_(t,n))||r},ownKeys:function(e){return Po(e).ownKeys_()},preventExtensions:function(e){bn(13)}};function Io(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Ao(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),On((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Co(e,t){var n=Pi();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&((t=r[i](t))&&!t.type&&bn(14),t);i++);return t}finally{Si(n)}}function xo(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Mo(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),On((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Ro(e,t){var n=Pi(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);Si(n)}}function Oo(e,t,n){return Ps((function(){var r=ns(e,n)[ar];null!=t||(t=function(e){return Gn(e,rr)||Ln(e,rr,Qn({},e[rr])),e[rr]}(e)),Wn(t).forEach((function(e){return r.make_(e,t[e])}))})),e}var Eo="splice",No="update",Do={get:function(e,t){var n=e[ar];return t===ar?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?Gn(ko,t)?ko[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[ar];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){bn(15)}},Uo=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new ur(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Ao(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Mo(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&bn("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&bn(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&ms(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=An),Io(this)){var o=Co(this,{object:this.proxy_,type:Eo,index:e,removedCount:t,added:n});if(!o)return An;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=xo(this),o=i||r?{observableKind:"array",object:this.proxy_,type:No,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&Ro(this,o)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=xo(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Eo,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Ro(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&bn(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(Io(this)){var i=Co(this,{type:No,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function To(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),Rn(),Ps((function(){var i=new Uo(n,t,r,!1);jn(i.values_,ar,i);var o=new Proxy(i.values_,Do);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o}))}var ko={clear:function(){return this.splice(0)},replace:function(e){var t=this[ar];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[ar];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[ar].spliceWithArray_(e,t,n)},push:function(){for(var e=this[ar],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[ar].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ar],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Oi.trackingDerivation&&bn(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Oi.trackingDerivation&&bn(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[ar],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Lo(e,t){"function"==typeof Array.prototype[e]&&(ko[e]=t(e))}function jo(e){return function(){var t=this[ar];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Bo(e){return function(t,n){var r=this,i=this[ar];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function Fo(e){return function(){var t=this,n=this[ar];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Lo("at",jo),Lo("concat",jo),Lo("flat",jo),Lo("includes",jo),Lo("indexOf",jo),Lo("join",jo),Lo("lastIndexOf",jo),Lo("slice",jo),Lo("toString",jo),Lo("toLocaleString",jo),Lo("toSorted",jo),Lo("toSpliced",jo),Lo("with",jo),Lo("every",Bo),Lo("filter",Bo),Lo("find",Bo),Lo("findIndex",Bo),Lo("findLast",Bo),Lo("findLastIndex",Bo),Lo("flatMap",Bo),Lo("forEach",Bo),Lo("map",Bo),Lo("some",Bo),Lo("toReversed",Bo),Lo("reduce",Fo),Lo("reduceRight",Fo);var Vo=Bn("ObservableArrayAdministration",Uo);function $o(e){return Un(e)&&Vo(e[ar])}var Wo={},Ko="add",Go="delete",Jo=function(){function e(e,t,n){var r=this;void 0===t&&(t=fr),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ar]=Wo,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,Nn(Map)||bn(18),Ps((function(){r.keysAtom_=cr("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Oi.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new ci(this.has_(e),pr,"ObservableMap.key?",!1);this.hasMap_.set(e,r),so(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Io(this)){var r=Co(this,{type:n?No:Ko,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Io(this))&&!Co(this,{type:Go,object:this,name:e}))return!1;if(this.has_(e)){var n=xo(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Go,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return wo((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Ro(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Oi.UNCHANGED){var r=xo(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:No,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&Ro(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,wo((function(){var r,i=new ci(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=xo(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Ko,object:this,name:e,newValue:t}:null;r&&Ro(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return qo({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return qo({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=Zn(this);!(n=r()).done;){var i=n.value,o=i[0],s=i[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return Ho(e)&&(e=new Map(e)),wo((function(){var n,r,i;Tn(e)?function(e){var t=Object.keys(e);if(!$n)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return In.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):Fn(e)?(n=e,r=Object.getPrototypeOf(n),i=Object.getPrototypeOf(r),null!==Object.getPrototypeOf(i)&&bn(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&bn(20,e)})),this},t.clear=function(){var e=this;wo((function(){wi((function(){for(var t,n=Zn(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return wo((function(){for(var n,r=function(e){if(Fn(e)||Ho(e))return e;if(Array.isArray(e))return new Map(e);if(Tn(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return bn(21,e)}(e),i=new Map,o=!1,s=Zn(t.data_.keys());!(n=s()).done;){var a=n.value;if(!r.has(a))if(t.delete(a))o=!0;else{var u=t.data_.get(a);i.set(a,u)}}for(var l,c=Zn(r.entries());!(l=c()).done;){var d=l.value,f=d[0],p=d[1],h=t.data_.has(f);if(t.set(f,p),t.data_.has(f)){var g=t.data_.get(f);i.set(f,g),h||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),m=i.keys(),b=v.next(),_=m.next();!b.done;){if(b.value!==_.value){t.keysAtom_.reportChanged();break}b=v.next(),_=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Mo(this,e)},t.intercept_=function(e){return Ao(this,e)},Yn(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Ho=Bn("ObservableMap",Jo);function qo(e){return e[Symbol.toStringTag]="MapIterator",Rs(e)}var zo={},Xo=function(){function e(e,t,n){var r=this;void 0===t&&(t=fr),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[ar]=zo,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,Nn(Set)||bn(22),this.enhancer_=function(e,r){return t(e,r,n)},Ps((function(){r.atom_=cr(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;wo((function(){wi((function(){for(var t,n=Zn(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=Zn(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,Io(this))&&!Co(this,{type:Ko,object:this,newValue:e}))return this;if(!this.has(e)){wo((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,r=xo(this),i=r?{observableKind:"set",debugObjectName:this.name_,type:Ko,object:this,newValue:e}:null;n,r&&Ro(this,i)}return this},t.delete=function(e){var t=this;if(Io(this)&&!Co(this,{type:Go,object:this,oldValue:e}))return!1;if(this.has(e)){var n=xo(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Go,object:this,oldValue:e}:null;return wo((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Ro(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Zo({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{value:void 0,done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Zo({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{value:void 0,done:!0}}})},t.intersection=function(e){return Vn(e)&&!Yo(e)?e.intersection(this):new Set(this).intersection(e)},t.union=function(e){return Vn(e)&&!Yo(e)?e.union(this):new Set(this).union(e)},t.difference=function(e){return new Set(this).difference(e)},t.symmetricDifference=function(e){return Vn(e)&&!Yo(e)?e.symmetricDifference(this):new Set(this).symmetricDifference(e)},t.isSubsetOf=function(e){return new Set(this).isSubsetOf(e)},t.isSupersetOf=function(e){return new Set(this).isSupersetOf(e)},t.isDisjointFrom=function(e){return Vn(e)&&!Yo(e)?e.isDisjointFrom(this):new Set(this).isDisjointFrom(e)},t.replace=function(e){var t=this;return Yo(e)&&(e=new Set(e)),wo((function(){Array.isArray(e)||Vn(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&bn("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Mo(this,e)},t.intercept_=function(e){return Ao(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Yn(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Yo=Bn("ObservableSet",Xo);function Zo(e){return e[Symbol.toStringTag]="SetIterator",Rs(e)}var Qo=Object.create(null),es="remove",ts=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Ur),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new ur("ObservableObject.keys"),this.isPlainObject_=Tn(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof di)return n.set(t),!0;if(Io(this)){var r=Co(this,{type:No,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==Oi.UNCHANGED){var i=xo(this),o=i?{type:No,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),i&&Ro(this,o)}return!0},t.get_=function(e){return Oi.trackingDerivation&&!Gn(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),Gn(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Oi.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new ci(e in this.target_,pr,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(as(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[rr])&&n[e])return;bn(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==In;){var i=Pn(r,e);if(i){var o=t.make_(this,e,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}ss(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);as(this,n,e);var i=n.extend_(this,e,t,r);return i&&ss(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Ui();var r=this.delete_(e);if(!r)return r;if(Io(this)){var i=Co(this,{object:this.proxy_||this.target_,name:e,type:Ko,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=Qn({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else Sn(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Ti()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{Ui();var i=this.delete_(e);if(!i)return i;if(Io(this)){var o=Co(this,{object:this.proxy_||this.target_,name:e,type:Ko,newValue:t});if(!o)return null;t=o.newValue}var s=is(e),a={configurable:!Oi.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else Sn(this.target_,e,a);var u=new ci(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{Ti()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Ui();var r=this.delete_(e);if(!r)return r;if(Io(this))if(!Co(this,{object:this.proxy_||this.target_,name:e,type:Ko,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=is(e),o={configurable:!Oi.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else Sn(this.target_,e,o);this.values_.set(e,new di(t)),this.notifyPropertyAddition_(e,void 0)}finally{Ti()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!Gn(this.target_,e))return!0;if(Io(this)&&!Co(this,{object:this.proxy_||this.target_,name:e,type:es}))return null;try{var n;Ui();var r,i=xo(this),o=this.values_.get(e),s=void 0;if(!o&&i)s=null==(r=Pn(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof ci&&(s=o.value_),Li(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(e in this.target_),i){var a={type:es,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,i&&Ro(this,a)}}finally{Ti()}return!0},t.observe_=function(e,t){return Mo(this,e)},t.intercept_=function(e){return Ao(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r=xo(this);if(r){var i=r?{type:Ko,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,r&&Ro(this,i)}null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Wn(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function ns(e,t){var n;if(Gn(e,ar))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new ts(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Tr(e):void 0}(t));return Ln(e,ar,i),e}var rs=Bn("ObservableObjectAdministration",ts);function is(e){return Qo[e]||(Qo[e]={get:function(){return this[ar].getObservablePropValue_(e)},set:function(t){return this[ar].setObservablePropValue_(e,t)}})}function os(e){return!!Un(e)&&rs(e[ar])}function ss(e,t,n){var r;null==(r=e.target_[rr])||delete r[n]}function as(e,t,n){}var us,ls,cs=gs(0),ds=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),fs=0,ps=function(){};us=ps,ls=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(us.prototype,ls):void 0!==us.prototype.__proto__?us.prototype.__proto__=ls:us.prototype=ls;var hs=function(e){function t(t,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this,Ps((function(){var e=new Uo(r,n,i,!0);e.proxy_=o,jn(o,ar,e),t&&t.length&&o.spliceWithArray(0,0,t),ds&&Object.defineProperty(o,"0",cs)})),o}er(t,e);var n=t.prototype;return n.concat=function(){this[ar].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return $o(e)?e.slice():e})))},n[Symbol.iterator]=function(){var e=this,t=0;return Rs({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Yn(t,[{key:"length",get:function(){return this[ar].getArrayLength_()},set:function(e){this[ar].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(ps);function gs(e){return{enumerable:!1,configurable:!0,get:function(){return this[ar].get_(e)},set:function(t){this[ar].set_(e,t)}}}function vs(e){Sn(hs.prototype,""+e,gs(e))}function ms(e){if(e>fs){for(var t=fs;t<e+100;t++)vs(t);fs=e}}function bs(e,t,n){return new hs(e,t,n)}function _s(e,t){if("object"==typeof e&&null!==e){if($o(e))return void 0!==t&&bn(23),e[ar].atom_;if(Yo(e))return e.atom_;if(Ho(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||bn(25,t,ws(e)),n}if(os(e)){if(!t)return bn(26);var r=e[ar].values_.get(t);return r||bn(27,t,ws(e)),r}if(lr(e)||hi(e)||Wi(e))return e}else if(Nn(e)&&Wi(e[ar]))return e[ar];bn(28)}function ys(e,t){return e||bn(29),void 0!==t?ys(_s(e,t)):lr(e)||hi(e)||Wi(e)||Ho(e)||Yo(e)?e:e[ar]?e[ar]:void bn(24,e)}function ws(e,t){var n;if(void 0!==t)n=_s(e,t);else{if(eo(e))return e.name;n=os(e)||Ho(e)||Yo(e)?ys(e):_s(e)}return n.name_}function Ps(e){var t=Pi(),n=ui(!0);Ui();try{return e()}finally{Ti(),li(n),Si(t)}}Object.entries(ko).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&Ln(hs.prototype,t,n)})),ms(1e3);var Ss,Is=In.toString;function As(e,t,n){return void 0===n&&(n=-1),Cs(e,t,n)}function Cs(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Is.call(e);if(s!==Is.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=xs(e),t=xs(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(Nn(u)&&u instanceof u&&Nn(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Cs(e[c],t[c],n-1,r,i))return!1}else{var d,f=Object.keys(e);if(c=f.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!Gn(t,d=f[c])||!Cs(e[d],t[d],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function xs(e){return $o(e)?e.slice():Fn(e)||Ho(e)||Vn(e)||Yo(e)?Array.from(e.entries()):e}var Ms=(null==(Ss=yn().Iterator)?void 0:Ss.prototype)||{};function Rs(e){return e[Symbol.iterator]=Os,Object.assign(Object.create(Ms),e)}function Os(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===yn()[e]&&bn("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:ws},$mobx:ar});const Es=e=>e(Oe);class Ns{constructor(e,t,n){this.$w=e,this.stateService=t,this.experiments=n,Wt()(this,"menuItems",void 0),Wt()(this,"menuContext",void 0),this.menuItems=(e=>Es(e).menuItems)(this.$w),Oo(this,{menuItems:Xr})}setNotificationsCount(){var e;if(!this.experiments.enabled(me.EnableNotifications))return;const t=null==(e=this.stateService.notificationsCounter)||null==(e=e.counters)?void 0:e.find((e=>"notificationsCount"===e.key)),n=null==t?void 0:t.count;this.$w(Oe).forEach((e=>{var t;null!=(t=e.navBarItems)&&t.length&&(e.navBarItems=[{...e.navBarItems[0],displayCount:n}])}))}bindMenuItems(){this.$w(Oe).menuItems=this.menuItems}filterMenuItemsVisibleForRoles(){const{routes:e}=this.menuContext,{currentUserRoles:t}=this.menuContext;this.menuItems=this.menuItems.filter((n=>{var r;const i=((e,t)=>e.find((e=>{var n;return null==(n=t.link)?void 0:n.includes(e.path)})))(e,n);return null==i||null==(r=i.vfr)||!r.length||((e,t)=>!t.length||e.some((e=>t.includes(e))))(t,i.vfr)}))}}const Ds=["{userName}","my"];class Us extends Ns{constructor(e,t,n){super(e,t,n),Oo(this,{initializeMenuItems:Zi})}initializeMenuItems(e){if(this.menuContext=e,this.menuContext.cacheService.hasLoginMenuItems())return this.menuItems=this.menuContext.cacheService.getLoginMenuItems(),void this.bindMenuItems();this.filterMenuItemsVisibleForRoles(),this.fillMenuItemsWithSlugs(),this.setNotificationsCount(),this.menuContext.cacheService.setLoginMenuItems(this.menuItems),this.bindMenuItems()}fillMenuItemsWithSlugs(){var e;const{currentUser:t}=this.menuContext,n=(null==t||null==(e=t.profile)?void 0:e.slug)??(null==t?void 0:t.id);n&&(this.menuItems=this.menuItems.map((e=>this.updateMenuItemWithMemberSlug(e,n))))}updateMenuItemWithMemberSlug(e,t){const n=this.getSlugPlaceholderFromMenuItem(e);return this.isValidSlugPlaceholder(n)?this.replaceLinkInMenuItem(e,t):e}isValidSlugPlaceholder(e){return Ds.includes(e)}replaceLinkInMenuItem(e,t){const n=this.getMemberPageRelativePathItemsFromMenuItem(e);if(!n.length)return e;const r=e.link.replace(n.join("/"),this.getMemberPageRelativePathWithMemberSlug(n,t));return{...e,link:r}}getMemberPageRelativePathWithMemberSlug(e,t){return e.map(((e,n)=>1===n?t:e)).join("/")}getSlugPlaceholderFromMenuItem(e){return this.getMemberPageRelativePathItemsFromMenuItem(e)[1]??""}getMemberPageRelativePathItemsFromMenuItem(e){const{membersAreaPagePrefix:t}=this.menuContext,n=e.link.indexOf(t);return e.link.slice(n).split("/")}}class Ts{constructor(e,t){this.contextProps=e,this.contextServices=t,Wt()(this,"routes",[]),Wt()(this,"currentUser",null),Wt()(this,"currentUserRoles",[]),Wt()(this,"notificationsCounter",null),this.contextProps=e,this.contextServices=t,Oo(this,{routes:Xr,currentUser:Xr,currentUserRoles:Xr,notificationsCounter:Xr,fetchCurrentUser:Zi,fetchCurrentUserRoles:Zi,fetchRouteConfigurations:Zi,fetchNotificationsCounters:Zi})}async fetchCurrentUser(){const{cacheService:e,currentUserService:t}=this.contextServices;e.hasCurrentUser()?this.currentUser=e.getCurrentUser():(this.currentUser=await t.getCurrentUser(),e.setCurrentUser(this.currentUser))}async fetchCurrentUserRoles(){var e;const{cacheService:t,rolesService:n}=this.contextServices;t.hasRoles()?this.currentUserRoles=t.getRoles():(this.currentUserRoles=await n.getMemberRoles((null==(e=this.currentUser)?void 0:e.id)??null),t.setRoles(this.currentUserRoles))}async fetchRouteConfigurations(){var e,t;const{experiments:n}=this.contextProps.flowAPI,{cacheService:r}=this.contextServices;if(r.hasRoutes())return void(this.routes=r.getRoutes());const i=Rt.getGlobalControllerConfig(),o=n.enabled(me.EnablePublicAppData),s=null==i?void 0:i.appParams,a=null==i||null==(e=i.config)?void 0:e.routes,u=o?null==s||null==(t=s.publicData)||null==(t=t.APP)?void 0:t.routes:void 0;this.routes=u??a??[],r.setRoutes(this.routes)}async fetchNotificationsCounters(){var e,t;const{controllerConfig:n,experiments:r}=this.contextProps.flowAPI;if(!r.enabled(me.EnableNotifications))return;const i=await It({memberId:null==(e=this.currentUser)?void 0:e.contactId,metaSiteId:null==(t=n.platformAPIs.bi)?void 0:t.metaSiteId,flowAPI:this.contextProps.flowAPI,wixCodeApi:this.contextProps.wixCodeApi});this.notificationsCounter=i}}class ks extends Ts{constructor(e,t){super(e,t),Wt()(this,"membersAreaPagePrefix",""),Oo(this,{membersAreaPagePrefix:Xr,fetchMembersAreaPagePrefix:Zi,fetchInitialData:Zi})}async fetchMembersAreaPagePrefix(){const{pageService:e}=this.contextServices,t=await e.getMembersAreaPagePrefix();this.membersAreaPagePrefix=t.replace("/","")}async fetchInitialData(){const{isSSR:e}=this.contextProps.flowAPI.environment;if(e){await this.fetchDataWrapper();const{currentUser:e,currentUserRoles:t,routes:n,membersAreaPagePrefix:r,notificationsCounter:i}=this;return this.contextServices.warmupDataService.setData(Ie,JSON.stringify({currentUser:e,currentUserRoles:t,routes:n,membersAreaPagePrefix:r,notificationsCounter:i}))}const t=this.contextServices.warmupDataService.getData(Ie),n=t?JSON.parse(t):null;return n?(this.currentUser=n.currentUser,this.currentUserRoles=n.currentUserRoles,this.routes=n.routes,this.membersAreaPagePrefix=n.membersAreaPagePrefix,void(this.notificationsCounter=n.notificationsCounter)):this.fetchDataWrapper()}async fetchDataWrapper(){await this.fetchCurrentUser(),await Promise.all([this.fetchRouteConfigurations(),this.fetchCurrentUserRoles(),this.fetchMembersAreaPagePrefix(),this.fetchNotificationsCounters()])}}class Ls{constructor(e){this.siteAPI=e}async getMembersAreaPagePrefix(){const{prefixes:e}=await this.siteAPI.getSiteStructure(),t=e.find((e=>{let{applicationId:t}=e;return t===be.rH}));if(!t)throw new Error("Error: missing members area page - failed to find prefix");return t.prefix}}var js,Bs,Fs,Vs,$s,Ws,Ks,Gs,Js,Hs={},qs={member:"_member"},zs={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",lastLoginDate:"google.protobuf.Timestamp"};function Xs(e){return Fe(Object.assign(e,{domainToMappings:{"www.wixapis.com":[{srcPath:"/members/v1/members",destPath:"/v1/members"}],"api._api_base_domain_":[{srcPath:"/members-ng-api",destPath:""}],"www._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"create.editorx":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"editor.wixapps.net":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"bo._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"wixbo.ai":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],_:[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"members.wixapps.net":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}]}}))}!function(e){e.UNKNOWN="UNKNOWN",e.PENDING="PENDING",e.APPROVED="APPROVED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE"}(js||(js={})),function(e){e.UNKNOWN="UNKNOWN",e.PRIVATE="PRIVATE",e.PUBLIC="PUBLIC"}(Bs||(Bs={})),function(e){e.UNKNOWN="UNKNOWN",e.ACTIVE="ACTIVE",e.MUTED="MUTED"}(Fs||(Fs={})),function(e){e.PUBLIC="PUBLIC",e.EXTENDED="EXTENDED",e.FULL="FULL"}(Vs||(Vs={})),function(e){e.ASC="ASC",e.DESC="DESC"}($s||($s={})),function(e){e.UNKNOWN="UNKNOWN",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e.PENDING="PENDING",e.DEMO="DEMO"}(Ws||(Ws={})),function(e){e.OTHER="OTHER",e.FROM_TEMPLATE="FROM_TEMPLATE",e.DUPLICATE_BY_SITE_TRANSFER="DUPLICATE_BY_SITE_TRANSFER",e.DUPLICATE="DUPLICATE",e.OLD_SITE_TRANSFER="OLD_SITE_TRANSFER",e.FLASH="FLASH"}(Ks||(Ks={})),function(e){e.UNKNOWN_NAMESPACE="UNKNOWN_NAMESPACE",e.WIX="WIX",e.SHOUT_OUT="SHOUT_OUT",e.ALBUMS="ALBUMS",e.WIX_STORES_TEST_DRIVE="WIX_STORES_TEST_DRIVE",e.HOTELS="HOTELS",e.CLUBS="CLUBS",e.ONBOARDING_DRAFT="ONBOARDING_DRAFT",e.DEV_SITE="DEV_SITE",e.LOGOS="LOGOS",e.VIDEO_MAKER="VIDEO_MAKER",e.PARTNER_DASHBOARD="PARTNER_DASHBOARD",e.DEV_CENTER_COMPANY="DEV_CENTER_COMPANY",e.HTML_DRAFT="HTML_DRAFT",e.SITELESS_BUSINESS="SITELESS_BUSINESS",e.CREATOR_ECONOMY="CREATOR_ECONOMY",e.DASHBOARD_FIRST="DASHBOARD_FIRST",e.ANYWHERE="ANYWHERE",e.HEADLESS="HEADLESS",e.ACCOUNT_MASTER_CMS="ACCOUNT_MASTER_CMS",e.RISE="RISE",e.BRANDED_FIRST="BRANDED_FIRST"}(Gs||(Gs={})),function(e){e.UNKNOWN="UNKNOWN",e.TRASH="TRASH",e.DELETED="DELETED",e.PENDING_PURGE="PENDING_PURGE"}(Js||(Js={}));class Ys{constructor(e){this.httpClient=e}async getCurrentUser(){const{data:e}=await this.httpClient.request(function(e){var t=Qe(Hs,{}),n=t.toJSON,r=t.fromJSON,i=Qe(qs,{_member:zs}).fromJSON;function o(t){var r=t.host,o=n(e);return{entityFqdn:"wix.members.v1.member",method:"GET",methodFqn:"com.wixpress.members.api.Members.GetMyMember",url:Xs({protoPath:"/v1/members/my",data:o,host:r}),params:We(o),transformResponse:i}}return o.fromReq=r,o.__isAmbassador=!0,o}({fieldSet:Vs.FULL}));return e.member??null}}class Zs{constructor(e){this.httpClient=e}async getMemberRoles(e){var t;const{data:n}=await this.httpClient.request(rt({memberId:e}));return(null==(t=n.roles)?void 0:t.map((e=>{var t;return null==(t=e.roleKey)?void 0:t.toLocaleLowerCase()})))||[]}}class Qs{constructor(e,t,n){this.memoryStorage=e,this.site=t,this.appDefId=n}hasCurrentUser(){const e=this.getCurrentUserCacheKey();return this.hasItemInStorage(e)}getCurrentUser(){const e=this.getCurrentUserCacheKey();return this.getItemFromStorage(e)}setCurrentUser(e){const t=this.getCurrentUserCacheKey();return this.setItemToStorage(t,e)}hasRoles(){const e=this.getRolesCacheKey();return this.hasItemInStorage(e)}getRoles(){const e=this.getRolesCacheKey();return this.getItemFromStorage(e)??[]}setRoles(e){const t=this.getRolesCacheKey();return this.setItemToStorage(t,e)}hasRoutes(){const e=this.getRoutesCacheKey();return this.hasItemInStorage(e)}getRoutes(){const e=this.getRoutesCacheKey();return this.getItemFromStorage(e)??[]}setRoutes(e){const t=this.getRoutesCacheKey();return this.setItemToStorage(t,e)}hasLoginMenuItems(){const e=this.getLoginBarMenuCacheKey();return this.hasItemInStorage(e)}getLoginMenuItems(){const e=this.getLoginBarMenuCacheKey();return this.getItemFromStorage(e)??[]}setLoginMenuItems(e){const t=this.getLoginBarMenuCacheKey();return this.setItemToStorage(t,e)}getRoutesCacheKey(){var e,t;return`members-routes-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getRolesCacheKey(){var e,t;return`members-roles-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getCurrentUserCacheKey(){var e,t;return`members-cu-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getLoginBarMenuCacheKey(){var e,t;return`members-login-bar-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}hasItemInStorage(e){return!!this.memoryStorage.getItem(e)}getItemFromStorage(e){const t=this.memoryStorage.getItem(e);return t?JSON.parse(t):null}setItemToStorage(e,t){return this.memoryStorage.setItem(e,JSON.stringify(t))}}class ea{constructor(e){this.viewerWarmupDataService=e,Wt()(this,"callMap",{})}getData(e){if(this.callMap[e])return null;const t=this.viewerWarmupDataService.get(e);return this.callMap[e]=!0,t}setData(e,t){return this.viewerWarmupDataService.set(e,t)}}const ta=e=>{let{flowAPI:t,controllerConfig:{platformAPIs:n,wixCodeApi:r,appParams:i}}=e;return{currentUserService:new Ys(t.httpClient),rolesService:new Zs(t.httpClient),cacheService:new Qs(n.storage.memory,r.site,i.appDefinitionId),warmupDataService:new ea(r.window.warmupData)}},na=async e=>{const{contextProps:t,contextServices:n}=(e=>{const{flowAPI:t,controllerConfig:n}=e,{wixCodeApi:r,appParams:i,$w:o}=n,s={$w:o,flowAPI:t,wixCodeApi:r,appParams:i},{currentUserService:a,rolesService:u,cacheService:l,warmupDataService:c}=ta({flowAPI:t,controllerConfig:n}),d=new Ls(r.site),f=new ks(s,{currentUserService:a,cacheService:l,rolesService:u,warmupDataService:c,pageService:d});return{contextProps:s,contextServices:{currentUserService:a,cacheService:l,rolesService:u,menuService:new Us(o,f,t.experiments),stateService:f}}})(e),{environment:r}=t.flowAPI,{user:i}=t.wixCodeApi,{stateService:o,cacheService:s,menuService:a}=n,u=i.currentUser.loggedIn&&!r.isEditor;return{async pageReady(){u&&(await o.fetchInitialData(),a.initializeMenuItems({...o,cacheService:s})),((e,t)=>{e.wixCodeApi.user.onLogin((async()=>{await t.stateService.fetchInitialData(),t.menuService.initializeMenuItems({...t.stateService,cacheService:t.cacheService})}))})(t,n),Rt.setMembersLoginWidgets([...Rt.getMembersLoginWidgets(),...Es(t.$w)])}}};class ra extends Ns{constructor(e,t,n){super(e,t,n),Oo(this,{initializeMenuItems:Zi})}initializeMenuItems(e){if(this.menuContext=e,this.menuContext.cacheService.hasLoginMenuItems())return this.menuItems=this.menuContext.cacheService.getLoginMenuItems(),void this.bindMenuItems();this.filterMenuItemsVisibleForRoles(),this.setNotificationsCount(),this.menuContext.cacheService.setLoginMenuItems(this.menuItems),this.bindMenuItems()}}class ia extends Ts{constructor(e,t){super(e,t),this.contextProps=e,this.contextServices=t,Oo(this,{fetchInitialData:Zi})}async fetchInitialData(){const{isSSR:e}=this.contextProps.flowAPI.environment;if(e){await this.fetchDataWrapper();const{currentUser:e,currentUserRoles:t,routes:n,notificationsCounter:r}=this;return this.contextServices.warmupDataService.setData(Ie,JSON.stringify({currentUser:e,currentUserRoles:t,routes:n,notificationsCounter:r}))}const t=this.contextServices.warmupDataService.getData(Ie),n=t?JSON.parse(t):null;return n?(this.currentUser=n.currentUser,this.currentUserRoles=n.currentUserRoles,this.routes=n.routes,void(this.notificationsCounter=n.notificationsCounter)):this.fetchDataWrapper()}async fetchDataWrapper(){await this.fetchCurrentUser(),await Promise.all([this.fetchRouteConfigurations(),this.fetchCurrentUserRoles(),this.fetchNotificationsCounters()])}}const oa=async e=>{const{contextProps:t,contextServices:n}=(e=>{const{flowAPI:t,controllerConfig:n}=e,{wixCodeApi:r,appParams:i,$w:o}=n,s={$w:o,flowAPI:t,wixCodeApi:r,appParams:i},{currentUserService:a,rolesService:u,cacheService:l,warmupDataService:c}=ta({flowAPI:t,controllerConfig:n}),d=new ia(s,{currentUserService:a,cacheService:l,rolesService:u,warmupDataService:c});return{contextProps:s,contextServices:{currentUserService:a,cacheService:l,rolesService:u,menuService:new ra(o,d,t.experiments),stateService:d}}})(e),{environment:r}=t.flowAPI,{user:i}=t.wixCodeApi,{stateService:o,cacheService:s,menuService:a}=n,u=i.currentUser.loggedIn&&!r.isEditor;return{async pageReady(){u&&(await o.fetchInitialData(),a.initializeMenuItems({...o,cacheService:s})),((e,t)=>{e.wixCodeApi.user.onLogin((async()=>{await t.stateService.fetchInitialData(),t.menuService.initializeMenuItems({...t.stateService,cacheService:t.cacheService})}))})(t,n),Rt.setMembersLoginWidgets([...Rt.getMembersLoginWidgets(),...Es(t.$w)])}}},sa=async e=>{let{controllerConfig:t,appData:n,flowAPI:r}=e;const{wixCodeApi:i,$w:o}=t,s="Editor"===i.window.viewMode,a=t;return ln(a),{async pageReady(){const e=await(null==n?void 0:n.initApplication());i.user.onLogin((t=>at("onLogin",(()=>cn(t,r.httpClient).then((()=>an(a,e)))))())),s?r.environment.isMobile&&dn(o,i,e.parsedRouters):an(a,e)}}},aa=async e=>(await(async(e,t)=>{const[n,r]=await Promise.all([vn(e.controllerConfig.wixCodeApi),gn(e.controllerConfig.wixCodeApi)]);return n?oa:r||(e=>{var t;return null==e||null==(t=e.connections)||null==(t=t[0])||null==(t=t.config)?void 0:t.isMembersAreaV2})(t)?na:sa})(e.flowAPI,e.controllerConfig))(e),ua=async e=>{let{controllerConfig:t,appData:n,flowAPI:r}=e;const{wixCodeApi:i,$w:o}=t,s="Editor"===i.window.viewMode,a=t;return ln(a),{async pageReady(){const e=await(null==n?void 0:n.initApplication());i.user.onLogin((t=>at("onLogin",(()=>cn(t,r.httpClient).then((()=>sn(a,e,r)))))())),s?r.environment.isMobile&&dn(o,i,e.parsedRouters):sn(a,e,r)}}},la=(e,t,n)=>{const r=new ea(t.window.warmupData);let i=null;return{getAppData:()=>(i||(i=async function(e){let{wixCodeApi:t,appParams:n,flowAPI:r,warmupDataService:i}=e;const o=Qt.getCurrentUser(),s=Qt.getRoles(),a=Qt.getViewedUser(),u=o.loggedIn&&0===Object.keys(s).length,l=null==t.site.getAppToken?void 0:t.site.getAppToken(n.appDefinitionId),c="backend"===t.window.rendering.env,d=(n.appRouters||[]).map((e=>({...e,config:JSON.parse(e.config)}))),f=d.map((e=>e.config)),p=async()=>{const[e,n,i]=await Promise.all([rn(l,c),u?on(l,r.httpClient):{},en.getPermittedPagesMap(Gt(d),t.window.viewMode)]);return{counters:e,roles:n,permittedPagesMap:i}};let h;r.environment.isSSR?(h=await p(),i.setData(Ie,h)):h=i.getData(Ie)||await p();const{counters:g,roles:v,permittedPagesMap:m}=h;u&&Qt.setRoles(v);const b=De(n),_=Qt.getRoles()[o.id]||[],y=Qt.getRoles()[a.id]||[],w=d.find((e=>"public"===e.config.type)),P=(null==w?void 0:w.prefix)??"";return{counters:g,permittedPagesMap:m,parsedRouters:d,parsedRoutersConfigs:f,parsedConfigItems:b,currentUserRoles:_,viewedUserRoles:y,publicRouterPrefix:P}}({appParams:e,wixCodeApi:t,flowAPI:n,warmupDataService:r})),i)}};var ca,da,fa;!function(e){e.MemberPage="member_page",e.SettingsPage="member_settings_page",e.About="about",e.MyAccount="member_info",e.FollowingFollowers="following_followers",e.FollowingFollowersLightbox="following_followers_modal",e.MyRewards="My Rewards",e.ForumPosts="member-posts-page",e.ForumComments="member-comments-page",e.Events="events_members_page",e.BlogComments="member-comments-page",e.BlogLikes="member-likes-page",e.BlogPosts="member-posts-page",e.BlogDrafts="member-drafts-page",e.MyPosts="My Posts",e.MyChallenges="My Challenges",e.MyPrograms="My Programs",e.MySubscriptions="My Subscriptions",e.MyBookings="bookings_member_area",e.Notifications="notifications_app",e.MyAddresses="my_addresses",e.MyOrders="order_history",e.MyWallet="my_wallet",e.Settings="settings",e.SharedGallery="Gallery",e.FileShare="wix_file_share_members_page",e.MyWishlist="wishlist",e.ContributorProfile="contributor-profile",e.Groups="My Groups",e.TestPublic="test-vertical-public-widget",e.TestPrivate="test-vertical-private-widget",e.ProfilePageBob="test-profile-page-bob"}(ca||(ca={})),function(e){e.About="14dbef06-cc42-5583-32a7-3abd44da4908",e.MyAccount="14cffd81-5215-0a7f-22f8-074b0e2401fb",e.Members="14dbefd2-01b4-fb61-32a7-3abd44da4908",e.Blog="14bcded7-0066-7c35-14d7-466cb3f09103",e.FileShare="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9",e.Followers="14ebe801-d78a-daa9-c9e5-0286a891e46f",e.Forum="14724f35-6794-cd1a-0244-25fd138f9242",e.Addresses="1505b775-e885-eb1b-b665-1e485d9bf90e",e.Bookings="13d21c63-b5ec-5912-8397-c3a5ddb27a97",e.Events="140603ad-af8d-84a5-2c80-a0f60cb47351",e.Stores="1380b703-ce81-ff05-f115-39571d94dfcd",e.Wallet="4aebd0cb-fbdb-4da7-b5d1-d05660a30172",e.Notifications="14f25924-5664-31b2-9568-f9c5ed98c9b1",e.Settings="14f25dc5-6af3-5420-9568-f9c5ed98c9b1",e.SharedGallery="476dc2dd-e16e-43b0-a0aa-1a486c78fbe2",e.Subscriptions="2bef2abe-7abe-43da-889c-53c1500a328c",e.ProfilePageBob="b976560c-3122-4351-878f-453f337b7245",e.Programs="2936472a-a1ed-4ae5-9f71-614313a9f4e7",e.Rewards="16ed1ac6-01cb-4fb6-a59e-c215cce8fdf6",e.Groups="148c2287-c669-d849-d153-463c7486a694",e.TestVertical="567d5e7e-4224-4488-a24b-d1ee5f691e54",e.ContributorProfile="f9694946-7e53-4ab4-9cc7-21d275993d39"}(da||(da={})),function(e){e.About="14dbefb9-3b7b-c4e9-53e8-766defd30587",e.MyAccount="14dd1af6-3e02-63db-0ef2-72fbc7cc3136",e.MyRewards="c85a2896-9f7c-4cf1-9bf8-95852cc5219a",e.Groups="e018cc55-7b1c-4500-a2e5-969f22c8a33a",e.ForumPosts="14f0266c-e0a3-afc6-d07c-5be8e20949cd",e.ForumComments="14f51b00-3ada-272e-b6db-34d5da9dd623",e.Events="405eb115-a694-4e2b-abaa-e4762808bb93",e.FollowingFollowers="14ebe825-b273-0d5f-0fd1-e6293322b83b",e.FollowingFollowersLightbox="a26fd26a-3dd9-42ca-b381-326a9c143e38",e.BlogComments="14f260f9-c2eb-50e8-9b3c-4d21861fe58f",e.BlogLikes="14f26109-514f-f9a8-9b3c-4d21861fe58f",e.BlogPosts="14f26118-b65b-b1c1-b6db-34d5da9dd623",e.BlogDrafts="14f260e4-ea13-f861-b0ba-4577df99b961",e.MyPosts="e5a2773b-0e6b-4cbb-a012-3b4a69e92046",e.MyChallenges="384628b7-c716-4410-8fc5-4e2bd5aad178",e.MyPrograms="c88902a1-7fbf-4ff1-b19a-af39c48bc740",e.MySubscriptions="b29db04a-a8f2-4bfe-bbad-21c99c1054b5",e.MyBookings="14edb332-fdb9-2fe6-0fd1-e6293322b83b",e.Notifications="14f2595a-a352-3ff1-9b3c-4d21861fe58f",e.Settings="14f25dd2-f9b0-edc2-f38e-eded5da094aa",e.MyAddresses="151290e1-62a2-0775-6fbc-02182fad5dec",e.MyOrders="14e121c8-00a3-f7cc-6156-2c82a2ba8fcb",e.MyWallet="6467c15e-af3c-4e8d-b167-41bfb8efc32a",e.SharedGallery="11b7884b-eba1-4a47-b5c8-7afb395f966a",e.FileShare="35a4cb97-c8cd-4ee9-ac3c-89c13c8493d6",e.TestPublic="eed51e05-c783-4506-9fb3-0f5c47d6dea2",e.TestPrivate="cc87eeb5-95a9-4f49-b7c3-5246eb39fee0",e.MyWishlist="a63a5215-8aa6-42af-96b1-583bfd74cff5",e.ContributorProfile="",e.ProfileCard="14cefc05-d163-dbb7-e4ec-cd4f2c4d6ddd",e.MemberPage="596a6688-3ad7-46f7-bb9c-00023225876d",e.SettingsPage="2f6c5608-393f-4b15-bfd8-d4e15396787a"}(fa||(fa={}));fa.About,ca.About,da.About,fa.MyAccount,ca.MyAccount,da.MyAccount,fa.MyRewards,ca.MyRewards,da.Rewards,fa.Groups,ca.Groups,da.Groups,fa.ForumPosts,ca.ForumPosts,da.Forum,fa.ForumComments,ca.ForumComments,da.Forum,fa.Events,ca.Events,da.Events,fa.FollowingFollowers,ca.FollowingFollowers,da.Followers,fa.FollowingFollowersLightbox,ca.FollowingFollowersLightbox,da.ProfilePageBob,fa.BlogComments,ca.BlogComments,da.Blog,fa.BlogLikes,ca.BlogLikes,da.Blog,fa.BlogPosts,ca.BlogPosts,da.Blog,fa.BlogDrafts,ca.BlogDrafts,da.Blog,fa.MyPosts,ca.MyPosts,da.Blog,fa.MyChallenges,ca.MyChallenges,da.Programs,fa.MyPrograms,ca.MyPrograms,da.Programs,fa.MySubscriptions,ca.MySubscriptions,da.Subscriptions,fa.MyBookings,ca.MyBookings,da.Bookings,fa.Notifications,ca.Notifications,da.Notifications,fa.MyAddresses,ca.MyAddresses,da.Addresses,fa.MyOrders,ca.MyOrders,da.Stores,fa.MyWishlist,ca.MyWishlist,da.Stores,fa.MyWallet,ca.MyWallet,da.Wallet,fa.Settings,ca.Settings,da.Settings,fa.SharedGallery,ca.SharedGallery,da.SharedGallery,fa.FileShare,ca.FileShare,da.FileShare,fa.TestPublic,ca.TestPublic,da.TestVertical,fa.TestPrivate,ca.TestPrivate,da.TestVertical,fa.ContributorProfile,ca.ContributorProfile,da.ContributorProfile,fa.ProfileCard,ca.MyAccount,da.MyAccount,fa.MemberPage,ca.MemberPage,da.ProfilePageBob,fa.SettingsPage,ca.SettingsPage,da.ProfilePageBob,fa.About,fa.MyAccount,be.xA,be.dn,fa.BlogLikes,be.dn,fa.BlogComments,be.dn,fa.BlogPosts,fa.ContributorProfile,fa.FileShare,fa.FollowingFollowers,be.rH,fa.FollowingFollowersLightbox,be.tt,fa.ForumComments,be.tt,fa.ForumPosts,fa.MyAddresses,be.DI,fa.MyBookings,be.dn,fa.BlogDrafts,be.dn,fa.MyPosts,be.sV,fa.Events,be.ZJ,fa.MyOrders,fa.MyWallet,be.ZJ,fa.MyWishlist,be.wn,fa.Notifications,fa.Settings,fa.SharedGallery,fa.MySubscriptions,fa.MyChallenges,fa.MyPrograms,fa.MyRewards,fa.SettingsPage,fa.MemberPage,fa.Groups,fa.TestPublic,fa.TestPrivate;var pa;!function(e){e.Profile="profile",e.Settings="settings",e.Standalone="standalone",e.Lightbox="lightbox"}(pa||(pa={}));class ha{constructor(e,t,n,r,i){this.routes=e,this.settingsRoutes=t,this.location=n,this.site=r,this.window=i}async hasSocialPages(e,t){const n=await this.getRoutes(e);if(!n.length)return Promise.resolve(!1);const r=n.some((e=>!e.private));return null==e||e(r),Promise.resolve(r)}async getRoutes(e){return null==e||e(this.routes),Promise.resolve(this.routes)}async getSettingsRoutes(e){return null==e||e(this.settingsRoutes),Promise.resolve(this.settingsRoutes)}async navigateToSection(e,t){var n,r;let{memberId:i="",tpaInnerRoute:o="",widgetId:s,appDefinitionId:a}=e;if(!s){var u,l;const e=await this.getPageUrlByAppDefId(a,t);return null==(u=(l=this.location).to)||u.call(l,e),Promise.resolve()}const c=await this.findRouteByWidgetId(s,t);if(!c)throw null==t||t(Ae.CannotFindPageToNavigateTo),new Error(Ae.CannotFindPageToNavigateTo);const d=await this.getMembersAreaSectionURL({suffix:c.path,memberId:i,tpaInnerRoute:o,onError:t});var f,p;return s===fa.FollowingFollowers?(null==(f=(p=this.location).to)||f.call(p,`${this.location.baseUrl}${d}`),Promise.resolve()):(null==(n=(r=this.location).to)||n.call(r,d),Promise.resolve())}async navigateToMember(e,t){let{memberId:n,memberSlug:r}=e;if(!n)throw null==t||t(Ae.MissingMemberId),new Error(Ae.MissingMemberId);const i=await this.getNavigableHomePage(t);if(!i)throw null==t||t(Ae.CannotNavigateToMemberNoPublicPage),new Error(Ae.CannotNavigateToMemberNoPublicPage);{var o,s;const e=await this.getMembersAreaSectionURL({suffix:i.suffix,memberId:r||n,onError:t});null==(o=(s=this.location).to)||o.call(s,e)}return Promise.resolve()}async getNavigatableRoles(e){const t=await this.getNavigableHomePage(e);if(t){return{navigatableMembersRoles:t.visibleForRoles??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async getSectionUrl(e,t){let{widgetId:n,memberId:r="",memberSlug:i="",tpaInnerRoute:o="",appDefinitionId:s}=e;if(!n)return this.getPageUrlByAppDefId(s,t);let a=this.location.baseUrl;"/"===a.slice(-1)&&(a=a.slice(0,-1));const u=await this.findRouteByWidgetId(n,t);if(!u)throw null==t||t(`${Ae.RouteNotFound} ${n}`),new Error(`${Ae.RouteNotFound} ${n}`);return`${a}${await this.getMembersAreaSectionURL({suffix:u.path,memberId:r,memberSlug:i,tpaInnerRoute:o,onError:t})}`}async getMemberPagePrefix(e,t,n){return{prefix:await this.getMembersAreaPagePrefix(n)}}setNotificationCount(e){return Rt.getMembersLoginWidgets().forEach((t=>{var n;null!=(n=t.navBarItems)&&n.length&&(t.navBarItems=[{...t.navBarItems[0],displayCount:e>0?e:null}])})),Promise.resolve()}getIsMembersAreaSeoEnabled(){return Promise.resolve(!0)}async isAppSectionInstalled(e){let{widgetId:t}=e;return!!await this.findRouteByWidgetId(t)}async openLightbox(e,t){const n=await this.getLightboxIdByTpaPageId(e);if(!n)throw new Error(`Lightbox ${e} is not installed`);return this.window.openLightboxById(n,t)}async getInstalledLightboxes(){const{lightboxes:e}=await this.getSiteStructure();return e.map((e=>{let{tpaPageId:t}=e;return t}))}async getPageUrlByAppDefId(e,t){const{pages:n}=await this.getSiteStructure(),r=n.find((t=>t.applicationId===e&&!t.prefix));if(null==r||!r.url)throw null==t||t(Ae.CannotFindPageToNavigateTo),new Error(Ae.CannotFindPageToNavigateTo);return r.url}async getNavigableHomePage(e){const t=(await this.getRoutes()).filter((e=>!e.private));if(!t.length)return;const n=t.find((e=>e.home)),r=await this.getMembersAreaPagePrefix(e);if(n)return{prefix:r,suffix:n.path,visibleForRoles:n.vfr};{const e=t[0];return{prefix:r,suffix:e.path,visibleForRoles:e.vfr}}}getSiteStructure(){return this.site.getSiteStructure({includePageId:!0})}async getMembersAreaPagePrefix(e){const{prefixes:t}=await this.getSiteStructure(),n=t.find((e=>{let{applicationId:t}=e;return t===ye}));if(!n)throw null==e||e(Ae.MissingMembersAreaPage),new Error(Ae.MissingMembersAreaPage);return n.prefix}async getMembersAreaSectionURL(e){let{suffix:t,memberId:n,memberSlug:r,tpaInnerRoute:i,onError:o}=e;const s=n?`/${r||n}/${t}`:`/${t}`,a=`${await this.getMembersAreaPagePrefix(o)}${s}`;if(!i)return a;return`${a}${"/"!==(null==i?void 0:i.charAt(0))?`/${i}`:i}`}async findRouteByWidgetId(e,t){return(await this.getRoutes()).find((t=>t.widgetId===e))}async getLightboxIdByTpaPageId(e){const{lightboxes:t}=await this.getSiteStructure(),n=t.find((t=>t.tpaPageId===e));return null==n?void 0:n.id}}const ga=()=>Rt.getWixCodeAPI().site.getPublicAPI(ye),va=()=>{const e=(()=>{var e;const t=(null==(e=Rt.getGlobalControllerConfig())||null==(e=e.config)?void 0:e.routes)??[],n=Rt.getRoutes();return n.length?n:t})(),t=Rt.getSettingsRoutes(),n=Rt.getWixCodeAPI();if(null==e||!e.length)throw new Error(Ae.MissingRoutes);if(!n)throw new Error(Ae.NotInitializedWixCodeApi);return new ha(e,t,n.location,n.site,n.window)};class ma{constructor(e,t,n,r,i){this.routes=e,this.settingsRoutes=t,this.location=n,this.site=r,this.window=i}async hasSocialPages(e,t){const n=(await this.getRoutes(e)).length>0;return null==e||e(n),Promise.resolve(n)}async getRoutes(e){return null==e||e(this.routes),Promise.resolve(this.routes)}async getSettingsRoutes(e){return null==e||e(this.settingsRoutes),Promise.resolve(this.settingsRoutes)}async navigateToSection(e,t){let{memberId:n="",tpaInnerRoute:r="",widgetId:i,appDefinitionId:o,sectionId:s}=e;const a=await this.findRouteByWidgetId(i);return a?this.navigateByRoute({routeData:a,memberId:n,tpaInnerRoute:r,widgetId:i},t):this.navigateByPagePath({appDefinitionId:o,sectionId:s},t)}async navigateToMember(e,t){let{memberId:n,memberSlug:r}=e;if(!n)throw null==t||t(Ae.MissingMemberId),new Error(Ae.MissingMemberId);const i=await this.getNavigableHomePage(t);if(!i)throw null==t||t(Ae.CannotNavigateToMemberNoPublicPage),new Error(Ae.CannotNavigateToMemberNoPublicPage);{var o,s;const e=await this.getMembersAreaSectionURL({suffix:i.suffix,memberId:r||n},t);null==(o=(s=this.location).to)||o.call(s,e)}return Promise.resolve()}async getNavigatableRoles(e){const t=await this.getNavigableHomePage(e);if(t){return{navigatableMembersRoles:t.visibleForRoles??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async getSectionUrl(e,t){let{appDefinitionId:n,sectionId:r,memberId:i,memberSlug:o,widgetId:s,tpaInnerRoute:a}=e;const u=await this.findRouteByWidgetId(s);if(u){const e=await this.getMembersAreaSectionURL({suffix:u.route.path,memberId:i,memberSlug:o,tpaInnerRoute:a},t);return this.prependBaseUrl(e)}const{url:l}=await this.site.getSectionUrl({appDefinitionId:n,sectionId:r});if(!l)throw null==t||t(Ae.SectionUrlNotFound),new Error(Ae.SectionUrlNotFound);return l}async getMemberPagePrefix(e,t,n){return{prefix:await this.getMembersAreaPagePrefix(n)}}setNotificationCount(e){return Rt.getMembersLoginWidgets().forEach((t=>{var n;null!=(n=t.navBarItems)&&n.length&&(t.navBarItems=[{...t.navBarItems[0],displayCount:e}])})),Promise.resolve()}getIsMembersAreaSeoEnabled(){return Promise.resolve(!0)}async isAppSectionInstalled(e){let{appDefinitionId:t,sectionId:n,widgetId:r}=e;return!(!await this.findRouteByWidgetId(r)&&!await this.findPage({appDefinitionId:t,sectionId:n}))}async openLightbox(e,t){const n=await this.getLightboxIdByTpaPageId(e);if(!n)throw new Error(`Lightbox ${e} is not installed`);return this.window.openLightboxById(n,t)}async getInstalledLightboxes(){const{lightboxes:e}=await this.getSiteStructure();return e.map((e=>{let{tpaPageId:t}=e;return t}))}async getPagePath(e){const t=await this.findPage(e);return null==t?void 0:t.url}async findPage(e){let{appDefinitionId:t,sectionId:n}=e;const{pages:r}=await this.getSiteStructure();return r.find((e=>e.applicationId===t&&e.tpaPageId===n&&!e.prefix))}async prependBaseUrl(e){let t=this.location.baseUrl;return"/"===t.slice(-1)&&(t=t.slice(0,-1)),`${t}${e}`}async getNavigableHomePage(e){const t=(await this.getRoutes()).filter((e=>!e.private));if(!t.length)return;const n=t.find((e=>e.home)),r=await this.getMembersAreaPagePrefix(e);if(n)return{prefix:r,suffix:n.path,visibleForRoles:n.vfr};{const e=t[0];return{prefix:r,suffix:e.path,visibleForRoles:e.vfr}}}getSiteStructure(){return this.site.getSiteStructure({includePageId:!0})}async getMembersAreaPagePrefix(e){const t=await this.findPage({appDefinitionId:ye,sectionId:"member_page"});if(null==t||!t.url)throw null==e||e(Ae.MissingMembersAreaPage),new Error(Ae.MissingMembersAreaPage);return t.url}async getMemberSettingsPagePrefix(e){const t=await this.findPage({appDefinitionId:ye,sectionId:"member_settings_page"});if(null==t||!t.url)throw null==e||e(Ae.MissingMembersAreaSettingsPage),new Error(Ae.MissingMembersAreaSettingsPage);return t.url}async getMembersAreaSectionURL(e,t){let{suffix:n,memberId:r,memberSlug:i,tpaInnerRoute:o}=e;const s=r?`/${i||r}/${n}`:`/${n}`,a=`${await this.getMembersAreaPagePrefix(t)}${s}`;if(!o)return a;return`${a}${"/"!==(null==o?void 0:o.charAt(0))?`/${o}`:o}`}async getMemberSettingsSectionURL(e,t){return`${await this.getMemberSettingsPagePrefix(t)}/${e}`}async findRouteByWidgetId(e){const t=(await this.getRoutes()).find((t=>t.widgetId===e));if(t)return{route:t,type:Ne.Profile};const n=(await this.getSettingsRoutes()).find((t=>t.widgetId===e));return n?{route:n,type:Ne.Settings}:null}async navigateToMembersAreaSection(e,t){var n,r;let{suffix:i,memberId:o,tpaInnerRoute:s,widgetId:a}=e;const u=await this.getMembersAreaSectionURL({suffix:i,memberId:o,tpaInnerRoute:s},t);var l,c;return a===fa.FollowingFollowers?(null==(l=(c=this.location).to)||l.call(c,`${this.location.baseUrl}${u}`),Promise.resolve()):(null==(n=(r=this.location).to)||n.call(r,u),Promise.resolve())}async navigateToMemberSettingsSection(e,t){var n,r;const i=await this.getMemberSettingsSectionURL(e,t);return null==(n=(r=this.location).to)||n.call(r,i),Promise.resolve()}async navigateByRoute(e,t){let{routeData:n,memberId:r,widgetId:i,tpaInnerRoute:o}=e;switch(n.type){case Ne.Profile:return this.navigateToMembersAreaSection({suffix:n.route.path,memberId:r,tpaInnerRoute:o,widgetId:i},t);case Ne.Settings:return this.navigateToMemberSettingsSection(n.route.path,t)}}async navigateByPagePath(e,t){var n,r;let{appDefinitionId:i,sectionId:o}=e;const s=await this.getPagePath({appDefinitionId:i,sectionId:o});if(!s)throw null==t||t(Ae.CannotFindPageToNavigateTo),new Error(Ae.CannotFindPageToNavigateTo);return null==(n=(r=this.location).to)||n.call(r,s),Promise.resolve()}async getLightboxIdByTpaPageId(e){const{lightboxes:t}=await this.getSiteStructure(),n=t.find((t=>t.tpaPageId===e));return null==n?void 0:n.id}}const ba=async()=>{const e=Rt.getWixCodeAPI();return await e.site.getPublicAPI(ye)},_a=()=>{const e=Rt.getSettingsRoutes(),t=Rt.getRoutes(),n=Rt.getWixCodeAPI();if(!n)throw new Error(Ae.NotInitializedWixCodeApi);return new ma(t,e,n.location,n.site,n.window)};var ya=function(e){return e.V1="v1",e.V2="v2",e.V3="v3",e}(ya||{});lo({isolateGlobalState:!0});const wa={[ya.V1]:()=>({hasSocialPages:(e,t)=>at("publicApi.hasSocialPages",(()=>Zt.hasSocialPages(e,t)))(),getViewedUser:(e,t)=>at("publicApi.getViewedUser",(()=>Zt.getViewedUser(e,t)))(),navigateToSection:(e,t)=>at("publicApi.navigateToSection",(()=>Zt.navigateToSection(e,t)))(),navigateToMember:(e,t)=>at("publicApi.navigateToMember",(()=>Zt.navigateToMember(e,t)))(),getNavigatableRoles:e=>at("publicApi.getNavigatableRoles",(()=>Zt.getNavigatableRoles(e)))(),getSectionUrl:(e,t)=>at("publicApi.getSectionUrl",(()=>Zt.getSectionUrl(e,t)))(),getMemberPagePrefix:(e,t,n)=>at("publicApi.getMemberPagePrefix ",(()=>Zt.getMemberPagePrefix(e,t,n)))(),setNotificationCount:e=>at("publicApi.setNotificationCount",(()=>Zt.setNotificationCount({config:Xt,userService:Qt,displayCount:e})))(),enterPublicProfilePreviewMode:()=>at("publicApi.enterPublicProfilePreviewMode",(()=>Zt.enterPublicProfilePreviewMode({userService:Qt,config:Xt})))(),leavePublicProfilePreviewMode:()=>at("publicApi.leavePublicProfilePreviewMode",(()=>Zt.leavePublicProfilePreviewMode({userService:Qt,config:Xt})))(),openBlockedMemberEmptyState:async()=>{throw new Error("openBlockedMemberEmptyState is only supported in members area v2")},clearMenus:()=>at("publicApi.clearMenus",(()=>Zt.clearMenus({config:Xt})))(),getRoutes:()=>{throw new Error("getRoutes is only supported in members area v2")},getSettingsRoutes:()=>{throw new Error("getRoutes is only supported in members area v3")},getIsMembersAreaSeoEnabled:()=>at("publicApi.getIsMembersAreaSeoEnabled",(()=>Zt.getIsMembersAreaSeoEnabled({config:Yt})))(),isAppSectionInstalled:e=>at("publicApi.isAppSectionInstalled",(()=>Zt.isAppSectionInstalled(e)))(),openLightbox:()=>{throw new Error("openLightbox is only supported in members area v2 and v3")},getInstalledLightboxes:()=>Promise.resolve([])}),[ya.V2]:()=>({hasSocialPages:(e,t)=>at("publicApi.hasSocialPages",(()=>va().hasSocialPages(e,t)))(),getViewedUser:(e,t)=>at("publicApi.getViewedUser",(async()=>(await ga()).getViewedUser(e,t)))(),navigateToSection:(e,t)=>at("publicApi.navigateToSection",(()=>va().navigateToSection(e,t)))(),navigateToMember:(e,t)=>at("publicApi.navigateToMember",(()=>va().navigateToMember(e,t)))(),getNavigatableRoles:e=>at("publicApi.getNavigatableRoles",(()=>va().getNavigatableRoles(e)))(),getSectionUrl:(e,t)=>at("publicApi.getSectionUrl",(()=>va().getSectionUrl(e,t)))(),getMemberPagePrefix:(e,t,n)=>at("publicApi.getMemberPagePrefix ",(()=>va().getMemberPagePrefix(e,t,n)))(),setNotificationCount:e=>at("publicApi.setNotificationCount",(()=>va().setNotificationCount(e)))(),enterPublicProfilePreviewMode:()=>at("publicApi.enterPublicProfilePreviewMode",(async()=>(await ga()).enterPublicProfilePreviewMode()))(),leavePublicProfilePreviewMode:()=>at("publicApi.leavePublicProfilePreviewMode",(async()=>(await ga()).leavePublicProfilePreviewMode()))(),openBlockedMemberEmptyState:()=>at("publicApi.openBlockedMemberEmptyState",(async()=>(await ga()).openBlockedMemberEmptyState()))(),clearMenus:()=>at("publicApi.clearMenus",(async()=>(await ga()).clearMenus()))(),getRoutes:e=>at("publicApi.getRoutes",(()=>va().getRoutes(e)))(),getSettingsRoutes:e=>at("publicApi.getSettingsRoutes",(()=>va().getSettingsRoutes(e)))(),getIsMembersAreaSeoEnabled:()=>at("publicApi.getIsMembersAreaSeoEnabled",(()=>va().getIsMembersAreaSeoEnabled()))(),isAppSectionInstalled:e=>at("publicApi.isAppSectionInstalled",(()=>va().isAppSectionInstalled(e)))(),openLightbox:(e,t)=>at("publicApi.openLightbox",(()=>va().openLightbox(e,t)))(),getInstalledLightboxes:()=>at("publicApi.getInstalledLightboxes",(()=>va().getInstalledLightboxes()))()}),[ya.V3]:()=>({hasSocialPages:(e,t)=>at("v3.publicApi.hasSocialPages",(()=>_a().hasSocialPages(e,t)))(),getViewedUser:(e,t)=>at("v3.publicApi.getViewedUser",(async()=>(await ba()).getViewedUser(e,t)))(),navigateToSection:(e,t)=>at("v3.publicApi.navigateToSection",(()=>_a().navigateToSection(e,t)))(),navigateToMember:(e,t)=>at("v3.publicApi.navigateToMember",(()=>_a().navigateToMember(e,t)))(),getNavigatableRoles:e=>at("v3.publicApi.getNavigatableRoles",(()=>_a().getNavigatableRoles(e)))(),getSectionUrl:(e,t)=>at("v3.publicApi.getSectionUrl",(()=>_a().getSectionUrl(e,t)))(),getMemberPagePrefix:(e,t,n)=>at("v3.publicApi.getMemberPagePrefix ",(()=>_a().getMemberPagePrefix(e,t,n)))(),setNotificationCount:e=>at("v3.publicApi.setNotificationCount",(()=>_a().setNotificationCount(e)))(),enterPublicProfilePreviewMode:()=>at("v3.publicApi.enterPublicProfilePreviewMode",(async()=>(await ba()).enterPublicProfilePreviewMode()))(),leavePublicProfilePreviewMode:()=>at("v3.publicApi.leavePublicProfilePreviewMode",(async()=>(await ba()).leavePublicProfilePreviewMode()))(),openBlockedMemberEmptyState:()=>at("v3.publicApi.openBlockedMemberEmptyState",(async()=>(await ba()).openBlockedMemberEmptyState()))(),clearMenus:()=>at("v3.publicApi.clearMenus",(async()=>(await ba()).clearMenus()))(),getRoutes:e=>at("v3.publicApi.getRoutes",(()=>_a().getRoutes(e)))(),getSettingsRoutes:e=>at("v3.publicApi.getSettingsRoutes",(()=>_a().getSettingsRoutes(e)))(),getIsMembersAreaSeoEnabled:()=>at("v3.publicApi.getIsMembersAreaSeoEnabled",(()=>_a().getIsMembersAreaSeoEnabled()))(),isAppSectionInstalled:e=>at("v3.publicApi.isAppSectionInstalled",(()=>_a().isAppSectionInstalled(e)))(),openLightbox:(e,t)=>at("v3.publicApi.openLightbox",(()=>_a().openLightbox(e,t)))(),getInstalledLightboxes:()=>at("v3.publicApi.getInstalledLightboxes",(()=>_a().getInstalledLightboxes()))()})},Pa=async()=>{const e=await(async()=>{const e=Rt.getWixCodeAPI(),[t,n]=await Promise.all([vn(e),gn(e)]);return t?ya.V3:n?ya.V2:ya.V1})();return(0,wa[e])()},Sa=async(e,t,n,r,i)=>{var o;const s=null==(o=e.publicData)?void 0:o.APP,a=(null==s?void 0:s.routes)??[],u=(null==s?void 0:s.settingsRoutes)??[];((e,t)=>{const n=Math.random();st=.1>=n,it=t.monitoring.createMonitor("https://fe0974951f45411fbe57fbbd7c30bbf2@sentry.wixpress.com/28"),it&&it.setUserContext({msid:t.bi.metaSiteId}),ot=t.fedOpsLoggerFactory.getLoggerForWidget({appName:"santa-members-viewer-app",appId:e.appDefinitionId})})(e,r),Rt.setFlowAPI(i),Rt.setWixCodeAPI(n),Rt.setRoutes(a),Rt.setSettingsRoutes(u);const l=la(e,n,i),c=at("initAppForPage",(()=>nn(e,t,n,i,r)))();return{initApplication:async()=>(await c,l.getAppData())}},Ia=()=>Pa();var Aa={disabled:{on:"disable",off:"enable"},hidden:{on:"hide",off:"show"},collapsed:{on:"collapse",off:"expand"},deleted:{on:"delete",off:"restore"}};var Ca,xa,Ma=function(e,t,n){return void 0===n&&(n=[]),function(r,i){if(!i)throw new Error("No selector found "+r);var o=n.length>0?function(e,t,n){if(!e||"object"!=typeof e)return n;for(var r=e,i=0,o=t;i<o.length;i++){var s=o[i];if(!r||"object"!=typeof r)return n;r=r[s]}return void 0!==r?r:n}(e(r),n):e(r),s=[],a="data"in i;a&&function(e,t,n){if(void 0!==t){var r={};e.onItemReady(n.action((function(e,i,o){var s=Ma(e,n),a=t(i,s,o);if(a){var u=Ra(e,n)(a);r[i._id]=u}}))),e.onItemRemoved(n.action((function(e){r[e._id]()})))}}(o,i.item,t);var u=function(e){return"currentState"in e}(i);if(u&&i.currentState){var l=t.reaction(i.currentState,(function(e){o.changeState(e)}),{fireImmediately:!0});s.push(l)}for(var c=function(i,l){if(void 0===l)return"continue";if(a&&"item"===i)return"continue";if(u&&"currentState"===i)return"continue";if(i.startsWith("on"))return o[i](t.action(l)),"continue";var c=$(n,[i]);if(function(e){return"object"==typeof e}(l)){var d=Ma(e,t,c)(r,l);return s.push(d),"continue"}if(i){var f=t.reaction(l,(function(t){if(s=o,(a=i)in Aa&&Aa[a].on in s&&Aa[a].off in s){var n=function(e){return Aa[e]}(i)[t?"on":"off"];o[n]&&o[n]()}else!function(e,t,n){if(!e||"object"!=typeof e)return e;var r=$(t),i=r.pop();if(i){for(var o=e,s=0,a=r;s<a.length;s++){var u=a[s];o[u]&&"object"==typeof o[u]||(o[u]={}),o=o[u]}o[i]=n}}(e(r),c,t);var s,a}),{fireImmediately:!0});s.push(f)}},d=0,f=Object.entries(i);d<f.length;d++){var p=f[d];c(p[0],p[1])}return function(){return s.forEach((function(e){return e()}))}}},Ra=function(e,t){return function(n){for(var r=Ma(e,t),i=[],o=0,s=Object.entries(n);o<s.length;o++){var a=s[o],u=a[0],l=a[1];if(l){var c=r(u,l);i.push(c)}}return function(){return i.forEach((function(e){return e()}))}}},Oa=function(e){return function(t){if(!t)throw new Error("Trying to initialize state without $w.");return{$bindAll:Ra(t,e),$bind:Ma(t,e)}}},Ea=function(e,t){var n,r;return null!==(r=null===(n=t.observable)||void 0===n?void 0:n.call(t,e))&&void 0!==r?r:e},Na=function(e){return function(t){if(!t)throw new Error("Trying to initialize state without default state.");return{state:Ea(t,e)}}};const Da=e=>function(t){void 0===t&&(t={});const n="function"==typeof e.factory?e.factory(t):e;return function(e,t){return Object.defineProperty(t,"updateDefaults",{value:function(t){return e.updateDefaults(t)}}),t}(n,n.logger())},Ua=Da;var Ta=e,ka=t,La=i,ja={initState:(Ca={initState:Na(xa={configure:function(){lo({isolateGlobalState:!0})},observable:Xr,action:Zi,reaction:function(e,t,n){var r,i,o;void 0===n&&(n=Cn);var s,a,u,l=null!=(r=n.name)?r:"Reaction",c=Zi(l,n.onError?(s=n.onError,a=t,function(){try{return a.apply(this,arguments)}catch(e){s.call(this,e)}}):t),d=!n.scheduler&&!n.delay,f=ro(n),p=!0,h=!1,g=n.compareStructural?dr.structural:n.equals||dr.default,v=new ji(l,(function(){p||d?m():h||(h=!0,f(m))}),n.onError,n.requiresObservable);function m(){if(h=!1,!v.isDisposed){var t=!1,r=u;v.track((function(){var n=ai(!1,(function(){return e(v)}));t=p||!g(u,n),u=n})),(p&&n.fireImmediately||!p&&t)&&c(u,r,v),p=!1}}return null!=(i=n)&&null!=(i=i.signal)&&i.aborted||v.schedule_(),v.getDisposer_(null==(o=n)?void 0:o.signal)}}),initBind:Oa(xa)}).initState,initBind:Ca.initBind,observable:Xr};const Ba=!1;var Fa={DSN:"https://1447e27dc6864379bd4824d259480b74@sentry-next.wixpress.com/7858",id:"undefined",projectName:"santa-members-viewer-app",teamName:"undefined",errorMonitor:!0},Va={enabled:!1,icuEnabled:!1},$a=null,Wa=null;const Ka=o.exports,Ga=function(e){var t=e.initAppForPage,n=e.sentryConfig,r=void 0===n?null:n,i=e.experimentsConfig,o=void 0===i?null:i,s=e.inEditor,a=void 0!==s&&s,u=e.projectName,l=e.defaultTranslations,c=e.translationsConfig,d=e.biConfig,f=e.biLogger,p=e.appName,h=void 0===p?null:p,g=e.optionalDeps,v=e.localeDistPath,m=e.prepopulatedData,b=e.shouldUseEssentials;return function(e,n,i,s){return L(void 0,void 0,void 0,(function(){var p,_,y,w;return j(this,(function(P){switch(P.label){case 0:return p=new E({experimentsConfig:o,projectName:u,sentryConfig:r,platformBI:s.bi,biLoggerFactory:s.biLoggerFactory,essentials:s.essentials,monitoring:s.monitoring,wixAPI:i,appData:e,translationsConfig:c,defaultTranslations:l,inEditor:a,biConfig:d,biLogger:f,appName:h,optionalDeps:g,localeDistPath:v,prepopulatedData:m,shouldUseEssentials:b}),D(p),_=p.init(),U(_),[4,_];case 1:if(P.sent(),!t)return[3,5];P.label=2;case 2:return P.trys.push([2,4,,5]),[4,t(e,n,i,s,p)];case 3:return y=P.sent(),k(y),[3,5];case 4:throw w=P.sent(),a||(console.error('\u2757\ufe0fError \u{1f449} "'.concat(h,'" app \u{1f449} `viewer.app.ts` module \u2757\n'),w),p.reportError(w)),w;case 5:return[2,T()]}}))}))}}({initAppForPage:o.initAppForPage,sentryConfig:Fa,experimentsConfig:{scopes:["members-area"],centralized:!0},inEditor:!1,biLogger:Ua,multilingualDisabled:Ba,projectName:"santa-members-viewer-app",biConfig:null,appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",fedopsConfig:Wa,translationsConfig:Va,defaultTranslations:$a,shouldUseEssentials:!0,optionalDeps:{initI18n:null,createHttpClient:null,createExperiments:null},localeDistPath:"assets/locales"}),Ja=(Ha={initI18n:null,blocksControllerService:null,createHttpClient:null,createExperiments:null,velocycleMobx:ja},qa=[{method:mn,wrap:ve,exports:Ta,widgetType:"PLATFORM_WIDGET",translationsConfig:Va,multilingualDisabled:Ba,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Wa,sentryConfig:Fa,persistentAcrossPages:!1,biLogger:Ua,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/d58756a41851642f/packages/members-viewer-app/src/components/members/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members",localeDistPath:"assets/locales",defaultTranslations:$a,id:"members"},{method:aa,wrap:ve,exports:ka,widgetType:"PLATFORM_WIDGET",translationsConfig:Va,multilingualDisabled:Ba,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Wa,sentryConfig:Fa,persistentAcrossPages:!1,biLogger:Ua,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/d58756a41851642f/packages/members-viewer-app/src/components/members-login-bar/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members-login-bar",localeDistPath:"assets/locales",defaultTranslations:$a,id:"members-login-bar"},{method:ua,wrap:ve,exports:La,widgetType:"PLATFORM_WIDGET",translationsConfig:Va,multilingualDisabled:Ba,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Wa,sentryConfig:Fa,persistentAcrossPages:!1,biLogger:Ua,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/d58756a41851642f/packages/members-viewer-app/src/components/members-menu/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members-menu",localeDistPath:"assets/locales",defaultTranslations:$a,id:"members-menu"}],void 0===(za=!0)&&(za=!1),function(e,t){var n=[];e.forEach((function(e){var r,i=e.type,o=(r=i,qa.find((function(e){return e.id===r})));if(o||function(e){var t,n,r;return(null===(t=e.appParams)||void 0===t?void 0:t.blocksData)||(null===(r=null===(n=e.appParams)||void 0===n?void 0:n.appData)||void 0===r?void 0:r.blocksPreviewData)}(e)&&(o={widgetType:s,method:null,exports:{}}),(null==o?void 0:o.widgetType)!==s&&!za){var a=null==t?void 0:t[i];if(!a)return;if(!o){var u=function(e){return B(e)?null:e.descriptor}(a);if(!u)throw new Error("Can't resolve controller descriptor for \"".concat(i,'" controller.'));o=u}o.method=function(e){if(B(e))return e;var t=e[Object.keys(e).find((function(e){return e.toLowerCase().includes("controller")}))||"default"];if("function"!=typeof t)throw new Error("Seems like a bundle you have registered as Controller URL in Dev Center doesn't contain exported controller.\nPlease, verify you are using relevant controller bundle generated by editor flow.");return t}(a),o.wrap=function(e){return B(e)?null:e.wrap}(a)||void 0,o.exports=a}o&&n.push({controllerDescriptor:o,controllerConfig:e})}));var r=n.map((function(e){var t=e.controllerDescriptor,n=e.controllerConfig;if(t.wrap)return t.wrap(Ha,t,n,I,A,T)}));return r});var Ha,qa,za;const Xa=Ja})(),r})()));
//# sourceMappingURL=viewerScript.bundle.min.js.map
//# sourceURL=https://static.parastorage.com/services/santa-members-viewer-app/1.2613.0/viewerScript.bundle.min.js