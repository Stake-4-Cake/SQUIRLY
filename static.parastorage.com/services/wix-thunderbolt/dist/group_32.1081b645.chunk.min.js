"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[8908],{13396:function(e,t,n){n.r(t),n.d(t,{PageTransitionsCompletedSymbol:function(){return s.dB},PageTransitionsSymbol:function(){return s.e$},editor:function(){return v},editorPage:function(){return h},page:function(){return _}});var o=n(77748),i=n(20590),r=n(32166),s=n(86046),a=n(41596);const d=(0,o.Og)([(0,o.KT)(i.Gp,s.UU),(0,o.KT)(i.wk,s.UU),s.dB,a.s,r.RV],((e,t,n,o,i)=>{const r=!!i&&"startViewTransition"in i.document&&e.shouldUseViewTransition;return{name:"pageTransitions",pageDidMount(o){const i=t.get(),r=i?.mountDoneHandler;r&&r({transitionName:e.transitionName,pageId:o}),(i?.isFirstMount??1)&&n.notifyPageTransitionsCompleted(o),t.update((e=>({...e,isFirstMount:!1})))},pageWillUnmount({contextId:e}){const s=t.get();if(r){const e=()=>{o.getScrollYHistoryState()||o.scrollToTop()},r=e=>{n.notifyPageTransitionsCompleted(e),o.getScrollYHistoryState()&&o.restoreScrollPosition()};!function(e,t,n,o){let i,r;t.document.documentElement.dataset.viewTransition="page-transition";const s=document.startViewTransition((()=>e.then((e=>{r=e.transitionName,i=e.pageId,t.document.documentElement.dataset.pageTransition=r}))));s.ready.then(n),s.finished.then((()=>{delete t.document.documentElement.dataset.viewTransition,o(i)}))}(new Promise((e=>{t.update((t=>({...t,mountDoneHandler:e})))})),i,e,r)}s?.propsUpdateListenersUnsubscribers?.[e]?.(),t.update((t=>{const n=t?.propsUpdateListenersUnsubscribers??{};return delete n[e],{...t,propsUpdateListenersUnsubscribers:n}}))}}})),l=(0,o.Og)([(0,o.KT)(i.wk,s.UU)],(e=>({disableNextTransition:()=>e.update((e=>({...e,nextTransitionEnabled:!1})))}))),p=(0,o.Og)([(0,o.KT)(i.Gp,s.UU)],(e=>{let t=[];return{hasTransition:"none"!==e.transitionName,onPageTransitionsCompleted:e=>{t.push(e)},notifyPageTransitionsCompleted:e=>{t.forEach((t=>t(e))),t=[]}}}));var u=n(16537),c=n(20636),g=n(87711);const m=(0,o.Og)([(0,o.KT)(i.Gp,s.UU),g.Ji,s.dB,a.s,(0,o.KT)(i.wk,s.UU),r.RV],((e,t,n,o,i,r)=>({componentTypes:["Page"],componentWillMount(s){const a=i.get(),d=!a||a.nextTransitionEnabled,l=!a||a.isFirstMount,p=!!r&&"startViewTransition"in r.document&&e.shouldUseViewTransition,u=s.id;t.update({SITE_PAGES:{transitionEnabled:d,...p?{}:{onTransitionStarting:()=>{o.getScrollYHistoryState()||o.scrollToTop()},onTransitionComplete:()=>{n.notifyPageTransitionsCompleted(u),o.getScrollYHistoryState()&&o.restoreScrollPosition()}}}}),i.update((()=>({...a,isFirstMount:l,nextTransitionEnabled:!0})))}})));var T=n(39218),U=n(10553),y=n(62155),b=n.n(y);const f=["video.videoInfo.videoId","image.uri","image.link.href","image.displayMode","backgroundImage.uri","backgroundImage.link.href","backgroundImage.displayMode"],P=["type","alignType","fittingType","scrollType","colorOverlay","colorOverlayOpacity","color","opacity"],k=(e,t,n,o)=>o.every((n=>(e&&e[n])===(t&&t[n])))&&n.every((i=>!e&&!t||k(e&&e[i],t&&t[i],n,o))),w=(0,o.Og)([(0,o.KT)(i.Gp,s.UU),g.Ji,(0,o.KT)(i.wk,s.UU),T.Is,T.DR,U.n],((e,t,n,o,i,r)=>{const s=`pageBackground_${o}`,a=r["specs.thunderbolt.bg_transitions_new_logic"],d=(i,r)=>{n.update((t=>({...t,pageBackgroundProp:i,pageBackground:e.pageBackground})));const s=(n.get()?.nextTransitionEnabled??!0)&&r;t.update({BACKGROUND_GROUP:{key:`BACKGROUND_GROUP_${e.viewMode}`,transitionEnabled:s,className:`backgroundGroup_${o}`}})},l=t=>{const o=n.get(),i=o?.pageBackgroundProp,r=e.pageBackground,s=o?.pageBackground,a=!((e,t)=>{if(!t||!e)return!1;const n=t.mediaRef,o=n&&n.type,i=e.mediaRef,r=i&&i.type,s=!n&&!i,a=s||o===r;let d=[...P];if("WixVideo"===o&&a){const e=d.indexOf("color");d.splice(e,1)}else s&&(d=["color"]);return a&&k(t,e,["mediaRef","imageOverlay"],d)})(r,s);return d=t,!((l=i)&&d&&f.every((e=>b().get(l,e)===b().get(d,e))))||a;var d,l};if(a&&t.get(s)){const e=t.get(s).fillLayers,n=l(e);d(e,n)}const p=t.subscribeToChanges((e=>{if(s in e){const t=e[s]?.fillLayers,n=l(t);a&&n?d(t,!0):a||d(t,n)}}));return n.update((e=>{const t=e?.propsUpdateListenersUnsubscribers??{};return t[i]=p,{...e||{},propsUpdateListenersUnsubscribers:t}})),{componentTypes:["PageBackground"],componentWillMount(){const e=n.get(),t=e?.isFirstMount??!0;n.update((()=>({...e,isFirstMount:t})))}}})),_=e=>{e(s.dB).to(p),e(s.e$).to(l),e(u.$.PageDidMountHandler,u.$.PageWillUnmountHandler).to(d),e(c.ls).to(m),e(c.ls).to(w)},h=e=>{e(u.$.PageDidMountHandler,u.$.PageWillUnmountHandler).to(d),e(c.ls).to(m),e(c.ls).to(w)},v=e=>{e(s.e$).to(l),e(s.dB).to(p)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_32.1081b645.chunk.min.js.map